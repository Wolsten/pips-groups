(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function O(){}const un=t=>t;function cn(t){return t()}function nt(){return Object.create(null)}function fe(t){t.forEach(cn)}function dn(t){return typeof t=="function"}function Y(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function kn(t){return Object.keys(t).length===0}function yn(t,...e){if(t==null)return O;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function te(t,e,n){t.$$.on_destroy.push(yn(e,n))}function lt(t){return t==null?"":t}function Me(t,e,n){return t.set(n),e}const hn=typeof window<"u";let Cn=hn?()=>window.performance.now():()=>Date.now(),$e=hn?t=>requestAnimationFrame(t):O;const _e=new Set;function _n(t){_e.forEach(e=>{e.c(t)||(_e.delete(e),e.f())}),_e.size!==0&&$e(_n)}function En(t){let e;return _e.size===0&&$e(_n),{promise:new Promise(n=>{_e.add(e={c:t,f:n})}),abort(){_e.delete(e)}}}function w(t,e){t.appendChild(e)}function gn(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function An(t){const e=I("style");return In(gn(t),e),e.sheet}function In(t,e){w(t.head||t,e)}function E(t,e,n){t.insertBefore(e,n||null)}function y(t){t.parentNode.removeChild(t)}function oe(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function I(t){return document.createElement(t)}function Q(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function G(t){return document.createTextNode(t)}function T(){return G(" ")}function x(){return G("")}function Z(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function ae(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Nn(t){return Array.from(t.childNodes)}function U(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function st(t,e){t.value=e==null?"":e}function X(t,e,n,l){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,l?"important":"")}function it(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];if(l.__value===e){l.selected=!0;return}}t.selectedIndex=-1}function Sn(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function F(t,e,n){t.classList[n?"add":"remove"](e)}function mn(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,l,e),s}class Pn{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,l=null){this.e||(this.is_svg?this.e=Q(n.nodeName):this.e=I(n.nodeName),this.t=n,this.c(e)),this.i(l)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)E(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(y)}}const Ge=new Map;let Oe=0;function Tn(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Rn(t,e){const n={stylesheet:An(e),rules:{}};return Ge.set(t,n),n}function ot(t,e,n,l,s,i,o,r=0){const f=16.666/l;let a=`{
`;for(let p=0;p<=1;p+=f){const b=e+(n-e)*i(p);a+=p*100+`%{${o(b,1-b)}}
`}const u=a+`100% {${o(n,1-n)}}
}`,c=`__svelte_${Tn(u)}_${r}`,h=gn(t),{stylesheet:d,rules:g}=Ge.get(h)||Rn(h,t);g[c]||(g[c]=!0,d.insertRule(`@keyframes ${c} ${u}`,d.cssRules.length));const k=t.style.animation||"";return t.style.animation=`${k?`${k}, `:""}${c} ${l}ms linear ${s}ms 1 both`,Oe+=1,c}function Wn(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-l.length;s&&(t.style.animation=l.join(", "),Oe-=s,Oe||Dn())}function Dn(){$e(()=>{Oe||(Ge.forEach(t=>{const{stylesheet:e}=t;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.rules={}}),Ge.clear())})}let Ee;function ye(t){Ee=t}function et(){if(!Ee)throw new Error("Function called outside component initialization");return Ee}function bn(t){et().$$.on_mount.push(t)}function Ln(t){et().$$.after_update.push(t)}function ne(){const t=et();return(e,n,{cancelable:l=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=mn(e,n,{cancelable:l});return s.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function Ue(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(l=>l.call(this,e))}const ke=[],le=[],Ve=[],Ye=[],Mn=Promise.resolve();let Je=!1;function Vn(){Je||(Je=!0,Mn.then(pn))}function re(t){Ve.push(t)}function Ae(t){Ye.push(t)}const ze=new Set;let Re=0;function pn(){const t=Ee;do{for(;Re<ke.length;){const e=ke[Re];Re++,ye(e),Fn(e.$$)}for(ye(null),ke.length=0,Re=0;le.length;)le.pop()();for(let e=0;e<Ve.length;e+=1){const n=Ve[e];ze.has(n)||(ze.add(n),n())}Ve.length=0}while(ke.length);for(;Ye.length;)Ye.pop()();Je=!1,ze.clear(),ye(t)}function Fn(t){if(t.fragment!==null){t.update(),fe(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(re)}}let we;function Gn(){return we||(we=Promise.resolve(),we.then(()=>{we=null})),we}function Xe(t,e,n){t.dispatchEvent(mn(`${e?"intro":"outro"}${n}`))}const Fe=new Set;let se;function B(){se={r:0,c:[],p:se}}function q(){se.r||fe(se.c),se=se.p}function m(t,e){t&&t.i&&(Fe.delete(t),t.i(e))}function C(t,e,n,l){if(t&&t.o){if(Fe.has(t))return;Fe.add(t),se.c.push(()=>{Fe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const On={duration:0};function ue(t,e,n,l){let s=e(t,n),i=l?0:1,o=null,r=null,f=null;function a(){f&&Wn(t,f)}function u(h,d){const g=h.b-i;return d*=Math.abs(g),{a:i,b:h.b,d:g,duration:d,start:h.start,end:h.start+d,group:h.group}}function c(h){const{delay:d=0,duration:g=300,easing:k=un,tick:p=O,css:b}=s||On,v={start:Cn()+d,b:h};h||(v.group=se,se.r+=1),o||r?r=v:(b&&(a(),f=ot(t,i,h,g,d,k,b)),h&&p(0,1),o=u(v,g),re(()=>Xe(t,h,"start")),En(A=>{if(r&&A>r.start&&(o=u(r,g),r=null,Xe(t,o.b,"start"),b&&(a(),f=ot(t,i,o.b,o.duration,0,k,s.css))),o){if(A>=o.end)p(i=o.b,1-i),Xe(t,o.b,"end"),r||(o.b?a():--o.group.r||fe(o.group.c)),o=null;else if(A>=o.start){const D=A-o.start;i=o.a+o.d*k(D/o.duration),p(i,1-i)}}return!!(o||r)}))}return{run(h){dn(s)?Gn().then(()=>{s=s(),c(h)}):c(h)},end(){a(),o=r=null}}}const jn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Hn(t,e){C(t,1,1,()=>{e.delete(t.key)})}function Bn(t,e,n,l,s,i,o,r,f,a,u,c){let h=t.length,d=i.length,g=h;const k={};for(;g--;)k[t[g].key]=g;const p=[],b=new Map,v=new Map;for(g=d;g--;){const M=c(s,i,g),P=n(M);let R=o.get(P);R?l&&R.p(M,e):(R=a(P,M),R.c()),b.set(P,p[g]=R),P in k&&v.set(P,Math.abs(g-k[P]))}const A=new Set,D=new Set;function W(M){m(M,1),M.m(r,u),o.set(M.key,M),u=M.first,d--}for(;h&&d;){const M=p[d-1],P=t[h-1],R=M.key,ee=P.key;M===P?(u=M.first,h--,d--):b.has(ee)?!o.has(R)||A.has(R)?W(M):D.has(ee)?h--:v.get(R)>v.get(ee)?(D.add(R),W(M)):(A.add(ee),h--):(f(P,o),h--)}for(;h--;){const M=t[h];b.has(M.key)||f(M,o)}for(;d;)W(p[d-1]);return p}function Ie(t,e,n){const l=t.$$.props[e];l!==void 0&&(t.$$.bound[l]=n,n(t.$$.ctx[l]))}function z(t){t&&t.c()}function j(t,e,n,l){const{fragment:s,on_mount:i,on_destroy:o,after_update:r}=t.$$;s&&s.m(e,n),l||re(()=>{const f=i.map(cn).filter(dn);o?o.push(...f):fe(f),t.$$.on_mount=[]}),r.forEach(re)}function H(t,e){const n=t.$$;n.fragment!==null&&(fe(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function qn(t,e){t.$$.dirty[0]===-1&&(ke.push(t),Vn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(t,e,n,l,s,i,o,r=[-1]){const f=Ee;ye(t);const a=t.$$={fragment:null,ctx:null,props:i,update:O,not_equal:s,bound:nt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:nt(),dirty:r,skip_bound:!1,root:e.target||f.$$.root};o&&o(a.root);let u=!1;if(a.ctx=n?n(t,e.props||{},(c,h,...d)=>{const g=d.length?d[0]:h;return a.ctx&&s(a.ctx[c],a.ctx[c]=g)&&(!a.skip_bound&&a.bound[c]&&a.bound[c](g),u&&qn(t,c)),h}):[],a.update(),u=!0,fe(a.before_update),a.fragment=l?l(a.ctx):!1,e.target){if(e.hydrate){const c=Nn(e.target);a.fragment&&a.fragment.l(c),c.forEach(y)}else a.fragment&&a.fragment.c();e.intro&&m(t.$$.fragment),j(t,e.target,e.anchor,e.customElement),pn()}ye(f)}class K{$destroy(){H(this,1),this.$destroy=O}$on(e,n){const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const s=l.indexOf(n);s!==-1&&l.splice(s,1)}}$set(e){this.$$set&&!kn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const rt=7,ft=4,zn=[31,28,31,30,31,30,31,31,30,31,30,31],We=-1,ge=["var(--tl-material-600-red)","var(--tl-material-400-indigo)","var(--tl-material-500-teal)","var(--tl-material-600-light-green)","var(--tl-material-500-amber)","var(--tl-material-300-brown)","var(--tl-material-500-blue-grey)","var(--tl-material-700-cyan)","var(--tl-material-700-orange)"],Xn=function(t,e,n){return n&&(t=e),ge[t%ge.length]},Un=function(t,e){return parseFloat(t.toPrecision(e))},Yn=function(t,e){let n=0;if(e<0)for(;n>e;)n-=t;else for(;n<e;)n+=t;return n},Jn=function(t,e=0){let n="";return t>1e6&&(t=t/1e6,n="M"),e==0?new Intl.NumberFormat("en-GB").format(t)+n:new Intl.NumberFormat("en-GB",{maximumSignificantDigits:e}).format(t)+n},Ke=function(t){let e=Be(t.year);return t.month>0&&t.day>0&&(e=`${t.day} ${Zn(t.month)} ${e}`),e},Kn=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Zn=function(t){return Kn[parseInt(t)-1]},Be=function(t){let n=Math.abs(t)/1e6,l=n*1e3;if(n>1){let s=Number.parseFloat(n).toPrecision(2);return s=new Intl.NumberFormat().format(s),t<0?s+"mya":s+"my"}else if(l>10){let s=parseInt(l/100)*100;return t<0?s+"tya":s+"ty"}else if(t<0)return Math.abs(t)+"bc";return t},Qn=function(t){let e="";return t.start!="-"&&(e+=Ke(t.start)),t.end&&(t.end=="-"?e+=" - ":e+=` - ${Ke(t.end)}`),e=`(${e})`,e},xn=function(t,e){const n=ie(t)?parseFloat(t.year):parseFloat(t),l=ie(e)?parseFloat(e.year):parseFloat(e);return{values:[],ticks:[],labels:[],majorFirst:n,majorLast:l,majorRange:l-n}},$n=function(t,e,n,l,s){let i={symbols:!1,readonly:!1,totalise:!1,categorise:!1,logscale:!1,search:"",filter:"",title:"",sort:"x",subCats:s};e!==""&&e.split(",").forEach(a=>{const u=a.split("=");if(u.length==2){const c=u[0].trim(),h=u[1].trim();switch(c){case"symbols":h==="true"&&(i.symbols=!0);break;case"readonly":h==="true"&&(i.readonly=!0);break;case"totalise":h==="true"&&(i.totalise=!0,i.categorise=!0);break;case"categorise":h==="true"&&(i.categorise=!0);break;case"logscale":h==="true"&&(i.logscale=!0);break;case"search":i.search=h;break;case"filter":i.filter=h;break;case"title":i.title=h;break;case"sort":i.sort=h;break;case"start":t==="date"?n=Ce(h):n=h;break;case"end":t==="date"?l=Ce(h):l=h;break;case"subCats":const d=h.split("|");d.length>0&&(d.forEach(g=>g.trim()),i.subCats=d)}}});let o,r;return t==="date"?(o=n.year,r=l.year):(o=parseFloat(n),r=parseFloat(l)),i.xRange={start:o,end:r,range:r-o},i},el=function(t,e,n){let l=[],s=new Set;n.forEach(o=>{s.add(o.subCategory)});let i=new Set;return e.forEach(o=>{i.add(o.subCategory)}),s=Array.from(s),i=Array.from(i),s.length>1&&(s.sort((o,r)=>o-r),s.push("total")),n.length>0&&s.forEach((o,r)=>{let f={id:r+1,max:Number.NEGATIVE_INFINITY,min:Number.POSITIVE_INFINITY,name:o,points:[],subCategory:o,citations:""};n.forEach(a=>{f.xUnit=a.xUnit,f.citations=a.citations,(o=="total"||a.subCategory==o)&&a.points.forEach(u=>{let c=f.points.findIndex(h=>t==="date"?h.x.year==u.x.year:h.x==u.x);f.points.length==0||c==-1?(f.points.push({...u}),c=f.points.length-1):f.points[c].y+=u.y,f.points[c].y>f.max&&(f.max=f.points[c].y),f.points[c].y<f.min&&(f.min=f.points[c].y)})}),t==="date"?f.points.sort((a,u)=>a.x.year-u.x.year):f.points.sort((a,u)=>a.x-u.x),l.push(f)}),{groups:l,eventsSubCats:i,seriesSubCats:s}},tl=function(t,e){const n=[];return t.forEach((l,s)=>{let i=s;l.subCategory!=""&&(i=n.findIndex(o=>o==l.subCategory),i==-1&&(n.push(l.subCategory),i=n.length-1)),l.colourIndex=i%ge.length,l.symbolIndex=s%rt}),e.forEach((l,s)=>{let i=s;l.subCategory!=""&&(i=n.findIndex(o=>o==l.subCategory),i==-1&&(n.push(l.subCategory),i=n.length-1)),l.colourIndex=i%ge.length,l.symbolIndex=s%rt}),{series:t,groups:e}},nl=function(t){t.events.forEach((l,s)=>{l.start=Ce(l.start),l.end=Ce(l.end),ie(l.start)&&(t.start===void 0||De(l.start,t.start)==We)&&(t.start=l.start),ie(l.end)&&(t.end===void 0||De(t.end,l.end)===We)&&(t.end=l.end)}),t.series.forEach(l=>{l.points.forEach(s=>{t.xUnit==="date"?(s.x=Ce(s.x),(t.start===void 0||De(s.x,t.start)==We)&&(t.start=s.x),(t.end===void 0||De(t.end,s.x)==We)&&(t.end=s.x)):((t.start===void 0||t.start.decimal<s.x)&&(t.start=s.x),(t.end===void 0||s.x<t.end.decimal)&&(t.end=s.x)),(t.min===void 0||s.y<t.min)&&(t.min=s.y),(t.max===void 0||s.y>t.max)&&(t.max=s.y)})}),t.end===void 0&&(t.end=t.start),t.xAxis=xn(t.start,t.end);const e=el(t.xUnit,t.events,t.series);t.eventsSubCats=e.eventsSubCats,t.seriesSubCats=e.seriesSubCats;const n=tl(t.series,e.groups);return t.series=n.series,t.groups=n.groups,t},ll=function(t,e,n,l,s,i,o){let r=sl(t,o,i);return r=il(r,e,n,l,s),al(r,s)},sl=function(t,e,n){const l=new RegExp(e,"i");let s=[];return t.forEach(i=>{(e==""||i.name.search(l)!=-1)&&n.includes(i.subCategory)&&s.push(i)}),s},il=function(t,e,n,l,s){let i=[];return t.forEach((o,r)=>{if(o.start==="-"||o.start.decimal>=n&&o.start.decimal<=l&&(o.end===void 0||o.end==="-"||o.end.decimal<=l)){o.index=o.id,o.start.decimal!==void 0?o.left=Math.round((o.start.decimal-n)*e):o.left=Math.round(n*e);let a=0;o.end===void 0?a=o.left:o.end==="-"?a=Math.round((l-n)*e):a=Math.round((o.end.decimal-n)*e),o.width=a-o.left,o.left+=N.CANVAS_PADDING_LEFT,o.width<ft&&(o.width=ft);let u=s.findIndex(c=>c==o.subCategory);u==-1?u=0:u=u%ge.length,o.colour=ge[u],i.push(o)}}),i};function at(t){return t%4==0&&t%100!=0||t%400==0}function ol(t){const e=at(t.year)?366:365;let n=0;for(let l=1;l<t.month;l++)n+=l==2&&at(t.year)?29:zn[l-1];return n+=t.day,t.year+n/e}const Ce=function(t){if(t===void 0||t==="-")return t;t=""+t;const e=t.split("-");let n=0,l=0,s=0;e.length==1?(e[0]=e[0].toLowerCase(),e[0].endsWith("bc")?n=-parseInt(e[0].split("bc")[0]):e[0].endsWith("mya")?n=-1e6*e[0].split("mya")[0]:e[0].endsWith("my")?n=1e6*e[0].split("my")[0]:n=parseInt(e[0])):(n=parseInt(e[0]),l=parseInt(e[1]),e.length==3&&(s=parseInt(e[2])));let i={year:n,month:l,day:s};return i.decimal=ol(i),i},ie=function(t){return t!==void 0&&t.day!==void 0&&t.month!==void 0&&t.year!==void 0},De=function(t,e){return!ie(t)&&!ie(e)&&typeof t!="number"?0:t.year<e.year?-1:t.year>e.year?1:t.month<e.month?-1:t.month>e.month?1:t.day<e.day?-1:t.day>e.day?1:0},rl=function(t,e){return t.start=="-"?-1:e.start=="-"?1:t.start.decimal!==void 0&&e.start.decimal!==void 0?t.start.decimal-e.start.decimal:0},fl=function(t,e){return t.cIndex-e.cIndex},al=function(t,e){return t.sort(rl),t.forEach((n,l)=>{n.xOrder=l,n.cIndex=e.findIndex(s=>s==n.subCategory)}),t.sort(fl),t.forEach((n,l)=>n.cOrder=l),[...t]},ul=function(t,e,n,l){let s=[];return t.forEach((i,o)=>{s[o]={...i,data:[]},i.points.forEach((r,f)=>{let a;if(ie(r.x)?a=r.x.decimal>=n&&r.x.decimal<=l:a=r.x>=n&&r.x<=l,a){const u=ie(r.x)?r.x.decimal:r.x,c=N.CANVAS_PADDING_LEFT+(u-n)*e;let h="";ie(r.x)?h=Ke(r.x):h=Be(r.x);const d={index:o,i:f,xLabel:h,x:parseInt(c),value:r.y,y:0};s[o].data.push(d)}})}),s},cl=function(t,e,n,l){const s=Math.floor(n/N.MIN_BOX_WIDTH),i=Math.round(n/s),o=Math.round(l.range/s);let r=N.CANVAS_PADDING_LEFT,f=l.start,a={...e};a.values=[],a.ticks=[],a.labels=[];for(let u=0;u<=s;u++)a.ticks.push(parseInt(r)),t==="date"?(a.values.push(parseInt(f)),a.labels.push(Be(parseInt(f)))):(a.values.push(parseInt(f)),a.labels.push(parseInt(f))),r+=i,f+=o;return a.majorLast=a.labels[a.labels.length-1],a.majorRange=a.majorLast-a.majorFirst,a},dl=function(t,e){let n;return function(...l){n&&clearTimeout(n),n=setTimeout(()=>{t(...l)},e)}},hl=function(t=[]){let e="",n=!1,l=[];return t&&(t.forEach(s=>{const i=s.split("\xA7");i.length==2&&l.push({date:new Date(i[0].trim()),change:i[1].trim()})}),l.length>0&&(e=l[0].date),l.length>1&&(n=l[l.length-1].date)),{created:e,updated:n,versions:l}},N={getVersionHistory:hl,processDataset:nl,initSettings:$n,processEvents:ll,processSeries:ul,eventDates:Qn,scaleXAxis:cl,debounce:dl,toPrecision:Un,formatNumber:Jn,formatYear:Be,colour:Xn,findNormalisedMin:Yn,COLOUR_INACTIVE:"var(--tl-material-grey-400)",MIN_BOX_WIDTH:80,CANVAS_MIN_HEIGHT:300,CANVAS_PADDING_LEFT:20,CANVAS_PADDING_RIGHT:20,NAV_BREAK:600};function _l(t){const e=t-1;return e*e*e+1}function je(t,{delay:e=0,duration:n=400,easing:l=un}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:l,css:i=>`opacity: ${i*s}`}}function He(t,{delay:e=0,duration:n=400,easing:l=_l}={}){const s=getComputedStyle(t),i=+s.opacity,o=parseFloat(s.height),r=parseFloat(s.paddingTop),f=parseFloat(s.paddingBottom),a=parseFloat(s.marginTop),u=parseFloat(s.marginBottom),c=parseFloat(s.borderTopWidth),h=parseFloat(s.borderBottomWidth);return{delay:e,duration:n,easing:l,css:d=>`overflow: hidden;opacity: ${Math.min(d*20,1)*i};height: ${d*o}px;padding-top: ${d*r}px;padding-bottom: ${d*f}px;margin-top: ${d*a}px;margin-bottom: ${d*u}px;border-top-width: ${d*c}px;border-bottom-width: ${d*h}px;`}}function ut(t,e,n){const l=t.slice();return l[3]=e[n],l[5]=n,l}function ct(t){let e,n,l,s,i=N.formatYear(t[0].labels[t[5]])+"",o,r;return{c(){e=Q("line"),s=Q("text"),o=G(i),_(e,"class","svg-major-tick svelte-1415yu"),_(e,"x1",n=t[3]),_(e,"y1",Ze),_(e,"x2",l=t[3]),_(e,"y2",dt),_(s,"class","svg-major-label svelte-1415yu"),_(s,"x",r=t[3]-N.MIN_BOX_WIDTH/4),_(s,"y",dt+14)},m(f,a){E(f,e,a),E(f,s,a),w(s,o)},p(f,a){a&1&&n!==(n=f[3])&&_(e,"x1",n),a&1&&l!==(l=f[3])&&_(e,"x2",l),a&1&&i!==(i=N.formatYear(f[0].labels[f[5]])+"")&&U(o,i),a&1&&r!==(r=f[3]-N.MIN_BOX_WIDTH/4)&&_(s,"x",r)},d(f){f&&y(e),f&&y(s)}}}function gl(t){let e,n,l,s,i,o=t[0].ticks,r=[];for(let f=0;f<o.length;f+=1)r[f]=ct(ut(t,o,f));return{c(){e=Q("svg"),n=Q("line");for(let f=0;f<r.length;f+=1)r[f].c();_(n,"class","svg-major svelte-1415yu"),_(n,"x1",N.CANVAS_PADDING_LEFT),_(n,"y1",Ze),_(n,"x2",l=N.CANVAS_PADDING_LEFT+t[2]),_(n,"y2",Ze),_(e,"class","axis svelte-1415yu"),_(e,"width",t[1]),_(e,"height",ml)},m(f,a){E(f,e,a),w(e,n);for(let u=0;u<r.length;u+=1)r[u].m(e,null);i=!0},p(f,[a]){if((!i||a&4&&l!==(l=N.CANVAS_PADDING_LEFT+f[2]))&&_(n,"x2",l),a&1){o=f[0].ticks;let u;for(u=0;u<o.length;u+=1){const c=ut(f,o,u);r[u]?r[u].p(c,a):(r[u]=ct(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=o.length}(!i||a&2)&&_(e,"width",f[1])},i(f){i||(re(()=>{s||(s=ue(e,je,{},!0)),s.run(1)}),i=!0)},o(f){s||(s=ue(e,je,{},!1)),s.run(0),i=!1},d(f){f&&y(e),oe(r,f),f&&s&&s.end()}}}const ml=35,Ze=0,dt=10;function bl(t,e,n){let{xAxis:l}=e,{viewportWidth:s}=e,{drawingWidth:i}=e;return t.$$set=o=>{"xAxis"in o&&n(0,l=o.xAxis),"viewportWidth"in o&&n(1,s=o.viewportWidth),"drawingWidth"in o&&n(2,i=o.drawingWidth)},[l,s,i]}class pl extends K{constructor(e){super(),J(this,e,bl,gl,Y,{xAxis:0,viewportWidth:1,drawingWidth:2})}}function vl(t){let e,n,l,s,i,o,r=t[1].name+"",f,a,u,c,h,d,g;return{c(){e=Q("g"),n=Q("rect"),o=Q("text"),f=G(r),_(n,"x",0),_(n,"y",l=-t[4]/2),_(n,"width",s=t[1].width),_(n,"height",i=t[4]*.9),_(n,"class","svelte-1ulj3vt"),_(o,"x",a=t[2].x),_(o,"class",u=lt(t[2].text)+" svelte-1ulj3vt"),_(o,"y",c=t[4]/7),_(e,"transform",h="translate("+t[1].left+", "+(t[3].top+(t[0].sort=="x"?t[1].xOrder:t[1].cOrder)*t[4])+")"),X(e,"--event-rect-colour",t[5](t[0].filter)),_(e,"class","svelte-1ulj3vt"),F(e,"selected",t[0].selectedEvent&&t[0].selectedEvent.index==t[1].index)},m(k,p){E(k,e,p),w(e,n),w(e,o),w(o,f),d||(g=Z(e,"click",ae(t[6])),d=!0)},p(k,[p]){p&16&&l!==(l=-k[4]/2)&&_(n,"y",l),p&2&&s!==(s=k[1].width)&&_(n,"width",s),p&16&&i!==(i=k[4]*.9)&&_(n,"height",i),p&2&&r!==(r=k[1].name+"")&&U(f,r),p&4&&a!==(a=k[2].x)&&_(o,"x",a),p&4&&u!==(u=lt(k[2].text)+" svelte-1ulj3vt")&&_(o,"class",u),p&16&&c!==(c=k[4]/7)&&_(o,"y",c),p&27&&h!==(h="translate("+k[1].left+", "+(k[3].top+(k[0].sort=="x"?k[1].xOrder:k[1].cOrder)*k[4])+")")&&_(e,"transform",h),p&1&&X(e,"--event-rect-colour",k[5](k[0].filter)),p&3&&F(e,"selected",k[0].selectedEvent&&k[0].selectedEvent.index==k[1].index)},i:O,o:O,d(k){k&&y(e),d=!1,g()}}}function wl(t,e,n){let{event:l}=e,{label:s}=e,{options:i}=e,{margin:o}=e,{height:r}=e;const f=ne();let a=0;function u(d){return d!==void 0&&d!==""?d==l.subCategory?l.colour:N.COLOUR_INACTIVE:l.colour}function c(){i.selectedEvent&&f("optionsChanged",{name:"selectedEvent",data:i.selectedEvent})}function h(){let d=Date.now();i.selectedEvent===!1||i.selectedEvent.index!==l.index?(n(0,i.selectedEvent={...l},i),a=d,setTimeout(c,500)):(i.readonly===!1&&a&&d-a<500?i.zoomIn():(n(0,i.selectedEvent=!1,i),f("optionsChanged",{name:"selectedEvent",data:i.selectedEvent})),a=0)}return t.$$set=d=>{"event"in d&&n(1,l=d.event),"label"in d&&n(2,s=d.label),"options"in d&&n(0,i=d.options),"margin"in d&&n(3,o=d.margin),"height"in d&&n(4,r=d.height)},[i,l,s,o,r,u,h]}class kl extends K{constructor(e){super(),J(this,e,wl,vl,Y,{event:1,label:2,options:0,margin:3,height:4})}}function ht(t,e,n){const l=t.slice();l[7]=e[n];const s=Cl(l[7],l[2]);return l[8]=s,l}function _t(t){let e,n=[],l=new Map,s,i,o=t[0];const r=f=>f[7].id;for(let f=0;f<o.length;f+=1){let a=ht(t,o,f),u=r(a);l.set(u,n[f]=gt(u,a))}return{c(){e=Q("svg");for(let f=0;f<n.length;f+=1)n[f].c();_(e,"class","events"),_(e,"width",t[2]),_(e,"height",s=t[5](t[3]))},m(f,a){E(f,e,a);for(let u=0;u<n.length;u+=1)n[u].m(e,null);i=!0},p(f,a){a&23&&(o=f[0],B(),n=Bn(n,a,r,1,f,o,l,e,Hn,gt,null,ht),q()),(!i||a&4)&&_(e,"width",f[2]),(!i||a&8&&s!==(s=f[5](f[3])))&&_(e,"height",s)},i(f){if(!i){for(let a=0;a<o.length;a+=1)m(n[a]);i=!0}},o(f){for(let a=0;a<n.length;a+=1)C(n[a]);i=!1},d(f){f&&y(e);for(let a=0;a<n.length;a+=1)n[a].d()}}}function gt(t,e){let n,l,s;return l=new kl({props:{event:e[7],label:e[8],margin:e[4],height:vn,options:e[1]}}),l.$on("optionsChanged",e[6]),{key:t,first:null,c(){n=x(),z(l.$$.fragment),this.first=n},m(i,o){E(i,n,o),j(l,i,o),s=!0},p(i,o){e=i;const r={};o&1&&(r.event=e[7]),o&5&&(r.label=e[8]),o&2&&(r.options=e[1]),l.$set(r)},i(i){s||(m(l.$$.fragment,i),s=!0)},o(i){C(l.$$.fragment,i),s=!1},d(i){i&&y(n),H(l,i)}}}function yl(t){let e,n,l=t[2]&&_t(t);return{c(){l&&l.c(),e=x()},m(s,i){l&&l.m(s,i),E(s,e,i),n=!0},p(s,[i]){s[2]?l?(l.p(s,i),i&4&&m(l,1)):(l=_t(s),l.c(),m(l,1),l.m(e.parentNode,e)):l&&(B(),C(l,1,1,()=>{l=null}),q())},i(s){n||(m(l),n=!0)},o(s){C(l),n=!1},d(s){l&&l.d(s),s&&y(e)}}}const mt=100,vn=20;function Cl(t,e){let n=t.width/2,l="middle",s=t.left+t.width;return s>0&&s<e*.7?(l="right",n=t.width+5):t.left>e*.3&&t.left<e?(l="left",n=-5):(t.left<0||s>e)&&(l="middle",n=e/2-t.left),{x:n,text:l}}function El(t,e,n){let{events:l}=e,{options:s}=e,{viewportWidth:i}=e,{size:o}=e;const r={top:20,left:N.CANVAS_PADDING_LEFT,right:N.CANVAS_PADDING_RIGHT,bottom:20};function f(u){let c=u*vn+r.top+r.bottom;return c<mt&&(c=mt),c}function a(u){Ue.call(this,t,u)}return t.$$set=u=>{"events"in u&&n(0,l=u.events),"options"in u&&n(1,s=u.options),"viewportWidth"in u&&n(2,i=u.viewportWidth),"size"in u&&n(3,o=u.size)},[l,s,i,o,r,f,a]}class Al extends K{constructor(e){super(),J(this,e,El,yl,Y,{events:0,options:1,viewportWidth:2,size:3})}}function Il(t){let e,n;return{c(){e=Q("rect"),_(e,"class",n="symbol-"+t[1]+" svelte-1dfjiq4"),_(e,"x",-Le/2),_(e,"y",-Le/2),_(e,"width",Le),_(e,"height",Le),X(e,"fill",t[0],!1)},m(l,s){E(l,e,s)},p(l,[s]){s&2&&n!==(n="symbol-"+l[1]+" svelte-1dfjiq4")&&_(e,"class",n),s&1&&X(e,"fill",l[0],!1)},i:O,o:O,d(l){l&&y(e)}}}const Le=10;function Nl(t,e,n){let{i:l}=e,{index:s}=e,{defaultColour:i}=e,{symbolIndex:o}=e,{symbols:r}=e,{selectedPoint:f}=e,a=!1,u="",c=o;return t.$$set=h=>{"i"in h&&n(2,l=h.i),"index"in h&&n(3,s=h.index),"defaultColour"in h&&n(4,i=h.defaultColour),"symbolIndex"in h&&n(5,o=h.symbolIndex),"symbols"in h&&n(6,r=h.symbols),"selectedPoint"in h&&n(7,f=h.selectedPoint)},t.$$.update=()=>{t.$$.dirty&172&&n(1,c=f.index==s&&f.i==l?"selected":o),t.$$.dirty&136&&n(8,a=f&&f.index==s),t.$$.dirty&476&&(n(0,u="transparent"),r?(f==!1||a)&&n(0,u=i):f.index==s&&f.i==l&&n(0,u=i))},[u,c,l,s,i,o,r,f,a]}class wn extends K{constructor(e){super(),J(this,e,Nl,Il,Y,{i:2,index:3,defaultColour:4,symbolIndex:5,symbols:6,selectedPoint:7})}}function bt(t,e,n){const l=t.slice();l[29]=e[n],l[33]=n;const s=l[14](l[0].selectedPoint,l[0].filter,l[33],l[29].colourIndex);l[30]=s;const i=l[30]==N.COLOUR_INACTIVE?1:2;return l[31]=i,l}function pt(t,e,n){const l=t.slice();return l[34]=e[n],l}function vt(t,e,n){const l=t.slice();return l[37]=e[n],l[33]=n,l}function wt(t){let e,n,l,s=t[7],i=[];for(let a=0;a<s.length;a+=1)i[a]=kt(vt(t,s,a));let o=t[0].series,r=[];for(let a=0;a<o.length;a+=1)r[a]=Et(bt(t,o,a));const f=a=>C(r[a],1,1,()=>{r[a]=null});return{c(){e=Q("svg");for(let a=0;a<i.length;a+=1)i[a].c();n=x();for(let a=0;a<r.length;a+=1)r[a].c();_(e,"height",t[11]),_(e,"viewportwidth",t[1]),_(e,"class","svelte-10j6xk0")},m(a,u){E(a,e,u);for(let c=0;c<i.length;c+=1)i[c].m(e,null);w(e,n);for(let c=0;c<r.length;c+=1)r[c].m(e,null);l=!0},p(a,u){if(u[0]&4300){s=a[7];let c;for(c=0;c<s.length;c+=1){const h=vt(a,s,c);i[c]?i[c].p(h,u):(i[c]=kt(h),i[c].c(),i[c].m(e,n))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}if(u[0]&24609){o=a[0].series;let c;for(c=0;c<o.length;c+=1){const h=bt(a,o,c);r[c]?(r[c].p(h,u),m(r[c],1)):(r[c]=Et(h),r[c].c(),m(r[c],1),r[c].m(e,null))}for(B(),c=o.length;c<r.length;c+=1)f(c);q()}(!l||u[0]&2)&&_(e,"viewportwidth",a[1])},i(a){if(!l){for(let u=0;u<o.length;u+=1)m(r[u]);l=!0}},o(a){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)C(r[u]);l=!1},d(a){a&&y(e),oe(i,a),oe(r,a)}}}function Sl(t){let e,n,l,s,i,o=N.formatNumber(t[37].label,2)+"",r,f;return{c(){e=Q("line"),i=Q("text"),r=G(o),_(e,"class","y-line svelte-10j6xk0"),_(e,"x1",t[3]),_(e,"x2",n=t[3]+t[2]),_(e,"y1",l=t[12](t[37].y,t[6])),_(e,"y2",s=t[12](t[37].y,t[6])),_(i,"class","y-label svelte-10j6xk0"),_(i,"x",0),_(i,"y",f=t[12](t[37].y,t[6])-6)},m(a,u){E(a,e,u),E(a,i,u),w(i,r)},p(a,u){u[0]&8&&_(e,"x1",a[3]),u[0]&12&&n!==(n=a[3]+a[2])&&_(e,"x2",n),u[0]&192&&l!==(l=a[12](a[37].y,a[6]))&&_(e,"y1",l),u[0]&192&&s!==(s=a[12](a[37].y,a[6]))&&_(e,"y2",s),u[0]&128&&o!==(o=N.formatNumber(a[37].label,2)+"")&&U(r,o),u[0]&192&&f!==(f=a[12](a[37].y,a[6])-6)&&_(i,"y",f)},d(a){a&&y(e),a&&y(i)}}}function kt(t){let e,n=t[33]!=0&&Sl(t);return{c(){n&&n.c(),e=x()},m(l,s){n&&n.m(l,s),E(l,e,s)},p(l,s){l[33]!=0&&n.p(l,s)},d(l){n&&n.d(l),l&&y(e)}}}function yt(t){let e,n,l=t[29].data,s=[];for(let o=0;o<l.length;o+=1)s[o]=Ct(pt(t,l,o));const i=o=>C(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=x()},m(o,r){for(let f=0;f<s.length;f+=1)s[f].m(o,r);E(o,e,r),n=!0},p(o,r){if(r[0]&24577){l=o[29].data;let f;for(f=0;f<l.length;f+=1){const a=pt(o,l,f);s[f]?(s[f].p(a,r),m(s[f],1)):(s[f]=Ct(a),s[f].c(),m(s[f],1),s[f].m(e.parentNode,e))}for(B(),f=l.length;f<s.length;f+=1)i(f);q()}},i(o){if(!n){for(let r=0;r<l.length;r+=1)m(s[r]);n=!0}},o(o){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)C(s[r]);n=!1},d(o){oe(s,o),o&&y(e)}}}function Ct(t){let e,n,l,s,i,o;n=new wn({props:{i:t[34].i,index:t[33],defaultColour:t[30],symbolIndex:t[29].symbolIndex,symbols:t[0].symbols,selectedPoint:t[0].selectedPoint}});function r(){return t[20](t[34],t[33])}return{c(){e=Q("g"),z(n.$$.fragment),_(e,"class","symbol"),_(e,"transform",l="translate("+t[34].x+","+t[34].scaledY+")")},m(f,a){E(f,e,a),j(n,e,null),s=!0,i||(o=Z(e,"click",ae(r)),i=!0)},p(f,a){t=f;const u={};a[0]&1&&(u.i=t[34].i),a[0]&1&&(u.defaultColour=t[30]),a[0]&1&&(u.symbolIndex=t[29].symbolIndex),a[0]&1&&(u.symbols=t[0].symbols),a[0]&1&&(u.selectedPoint=t[0].selectedPoint),n.$set(u),(!s||a[0]&1&&l!==(l="translate("+t[34].x+","+t[34].scaledY+")"))&&_(e,"transform",l)},i(f){s||(m(n.$$.fragment,f),s=!0)},o(f){C(n.$$.fragment,f),s=!1},d(f){f&&y(e),H(n),i=!1,o()}}}function Et(t){let e,n,l,s,i,o=t[31]!=1&&yt(t);return{c(){e=Q("polyline"),o&&o.c(),s=x(),_(e,"points",n=t[5][t[33]]),X(e,"stroke-width",t[31]),X(e,"stroke",t[30]),_(e,"class","svelte-10j6xk0")},m(r,f){E(r,e,f),o&&o.m(r,f),E(r,s,f),i=!0},p(r,f){(!i||f[0]&32&&n!==(n=r[5][r[33]]))&&_(e,"points",n),(!i||f[0]&1)&&X(e,"stroke-width",r[31]),(!i||f[0]&1)&&X(e,"stroke",r[30]),r[31]!=1?o?(o.p(r,f),f[0]&1&&m(o,1)):(o=yt(r),o.c(),m(o,1),o.m(s.parentNode,s)):o&&(B(),C(o,1,1,()=>{o=null}),q())},i(r){i||(re(()=>{l||(l=ue(e,je,{},!0)),l.run(1)}),m(o),i=!0)},o(r){l||(l=ue(e,je,{},!1)),l.run(0),C(o),i=!1},d(r){r&&y(e),r&&l&&l.end(),o&&o.d(r),r&&y(s)}}}function Pl(t){let e,n,l,s,i,o,r,f,a=t[0].series.length>0&&wt(t);return{c(){a&&a.c(),e=T(),n=I("span"),l=I("span"),s=T(),i=I("span"),o=T(),r=I("span"),_(l,"class","tooltip-arrow svelte-10j6xk0"),_(i,"class","tooltip-text svelte-10j6xk0"),_(r,"class","tooltip-arrow svelte-10j6xk0"),_(n,"class","tooltip svelte-10j6xk0")},m(u,c){a&&a.m(u,c),E(u,e,c),E(u,n,c),w(n,l),l.innerHTML=t[9],w(n,s),w(n,i),i.innerHTML=t[8],w(n,o),w(n,r),r.innerHTML=t[10],t[21](n),f=!0},p(u,c){u[0].series.length>0?a?(a.p(u,c),c[0]&1&&m(a,1)):(a=wt(u),a.c(),m(a,1),a.m(e.parentNode,e)):a&&(B(),C(a,1,1,()=>{a=null}),q()),(!f||c[0]&512)&&(l.innerHTML=u[9]),(!f||c[0]&256)&&(i.innerHTML=u[8]),(!f||c[0]&1024)&&(r.innerHTML=u[10])},i(u){f||(m(a),f=!0)},o(u){C(a),f=!1},d(u){a&&a.d(u),u&&y(e),u&&y(n),t[21](null)}}}function Tl(t,e,n){let{options:l}=e,{series:s}=e,{groups:i}=e,{viewportWidth:o}=e,{drawingWidth:r}=e,{paddingLeft:f}=e;const a=ne();let u=Math.min(o/2,N.CANVAS_MIN_HEIGHT),c=[],h=[],d,g,k=0,p=[],b,v="",A="",D="",W=!1,M=!1,P=!1,R=[...l.subCats];function ee(){n(17,W=l.totalise),n(18,M=l.categorise),n(19,P=l.logScale),c=W?[...i]:[...s],l.subCats.length!=0&&(c=c.filter(S=>l.subCats.includes(S.subCategory))),Se(),n(0,l.series=[],l),n(5,h=[]),c.forEach((S,V)=>{let $=d;n(0,l.series[V]={name:S.legend||S.name,colourIndex:S.colourIndex,symbolIndex:S.symbolIndex,citations:S.citations,subCategory:S.subCategory,data:[]},l),n(5,h[V]="",h),S.data.forEach((ce,ve)=>{let de=ce.value;l.logScale&&(de=de!=0?Math.log10(de):1),l.series[V].data.push(ce),ce.scaledY=L(de,$),n(5,h[V]+=` ${ce.x},${ce.scaledY}`,h)})})}function Se(){n(6,d=Number.POSITIVE_INFINITY),g=Number.NEGATIVE_INFINITY,c.forEach($=>{$.min<d&&n(6,d=$.min),$.max>g&&(g=$.max)}),l.logScale&&(d<=0?n(6,d=Math.round(Math.log10(d))):n(6,d=1),g=Math.round(Math.log10(g))),k=g-d,k=N.toPrecision(k,1);const S=l.logScale?.5:k/10;n(6,d=N.findNormalisedMin(S,d));let V=d;for(n(7,p=[]);V<g;)p.push({y:V,label:l.logScale?Math.pow(10,V):V}),V+=S*2;g=V,k=g-d}function L(S,V){return parseInt(u*(1-(S-V)/k))}function be(S,V){l.selectedPoint===!1||l.selectedPoint.index!=V||l.selectedPoint.i!=S.i?n(0,l.selectedPoint={type:"series",name:c[V].legend||c[V].name,index:V,i:S.i,citations:c[V].citations},l):n(0,l.selectedPoint=!1,l),a("optionsChanged",{name:"selectedPoint",data:l.selectedPoint})}function Pe(S,V,$,ce){let ve=!1,de=N.colour($,ce,l.categorise);return S&&S.type=="series"?S.index!=$&&(ve=!0):V!=""&&(l.totalise?c[$].subCategory!=V&&(ve=!0):c[$].legend!=V&&(ve=!0)),ve&&(de=N.COLOUR_INACTIVE),de}const Te=(S,V)=>be(S,V);function pe(S){le[S?"unshift":"push"](()=>{b=S,n(4,b),n(0,l),n(1,o)})}return t.$$set=S=>{"options"in S&&n(0,l=S.options),"series"in S&&n(15,s=S.series),"groups"in S&&n(16,i=S.groups),"viewportWidth"in S&&n(1,o=S.viewportWidth),"drawingWidth"in S&&n(2,r=S.drawingWidth),"paddingLeft"in S&&n(3,f=S.paddingLeft)},t.$$.update=()=>{if(t.$$.dirty[0]&1015809&&(s||i||l.categorise!=M||l.totalise!=W||l.logScale!=P||l.subCats.length!=R.length)&&ee(),t.$$.dirty[0]&19&&b){if(l.selectedPoint==!1)n(8,v=""),n(4,b.style="opacity:0",b);else if(l.selectedPoint.type==="series"&&l.selectedPoint.i!=-1){(l.series[l.selectedPoint.index]==null||l.series[l.selectedPoint.index].data==null)&&console.error("Found undefined series for selected",l.selectedPoint);const S=l.series[l.selectedPoint.index].data.find(V=>V.i==l.selectedPoint.i);if(S){n(8,v=`${N.formatNumber(S.value)}<br>${S.xLabel}`);const V=S.scaledY-14;if(o-S.x>120){const $=S.x+5;n(4,b.style=`opacity:1;left:${$}px;top:${V}px; text-align:right;`,b),n(9,A="&larr;"),n(10,D="")}else{const $=o-S.x+10;n(4,b.style=`opacity:1;right:${$}px;top:${V}px`,b),n(9,A=""),n(10,D="&rarr;")}}}}},[l,o,r,f,b,h,d,p,v,A,D,u,L,be,Pe,s,i,W,M,P,Te,pe]}class Rl extends K{constructor(e){super(),J(this,e,Tl,Pl,Y,{options:0,series:15,groups:16,viewportWidth:1,drawingWidth:2,paddingLeft:3},null,[-1,-1])}}function At(t,e,n){const l=t.slice();l[8]=e[n],l[11]=n;const s=l[0].totalise?l[8].subCategory:l[8].name;return l[9]=s,l}function It(t,e,n){const l=t.slice();return l[12]=e[n],l[11]=n,l}function Nt(t){let e,n,l,s=t[1].length>0&&t[2].length>0&&St(t),i=t[0].series.length>1&&Rt(t);return{c(){e=I("aside"),s&&s.c(),n=T(),i&&i.c(),_(e,"class","svelte-bib0jc")},m(o,r){E(o,e,r),s&&s.m(e,null),w(e,n),i&&i.m(e,null),l=!0},p(o,r){o[1].length>0&&o[2].length>0?s?s.p(o,r):(s=St(o),s.c(),s.m(e,n)):s&&(s.d(1),s=null),o[0].series.length>1?i?(i.p(o,r),r&1&&m(i,1)):(i=Rt(o),i.c(),m(i,1),i.m(e,null)):i&&(B(),C(i,1,1,()=>{i=null}),q())},i(o){l||(m(i),l=!0)},o(o){C(i),l=!1},d(o){o&&y(e),s&&s.d(),i&&i.d()}}}function St(t){let e,n,l,s=t[1],i=[];for(let o=0;o<s.length;o+=1)i[o]=Tt(It(t,s,o));return{c(){e=I("div"),n=I("span"),n.textContent="Event categories:",l=T();for(let o=0;o<i.length;o+=1)i[o].c();_(n,"class","title svelte-bib0jc"),_(e,"class","sub-categories svelte-bib0jc")},m(o,r){E(o,e,r),w(e,n),w(e,l);for(let f=0;f<i.length;f+=1)i[f].m(e,null)},p(o,r){if(r&15){s=o[1];let f;for(f=0;f<s.length;f+=1){const a=It(o,s,f);i[f]?i[f].p(a,r):(i[f]=Tt(a),i[f].c(),i[f].m(e,null))}for(;f<i.length;f+=1)i[f].d(1);i.length=s.length}},d(o){o&&y(e),oe(i,o)}}}function Pt(t){let e,n=t[12]+"",l,s,i,o;function r(){return t[5](t[12])}return{c(){e=I("span"),l=G(n),s=T(),_(e,"class","series svelte-bib0jc"),_(e,"title","Click to highlight this event category"),F(e,"active",t[0].search==t[12]),X(e,"color",N.colour(t[11],t[11],t[0].categorise),!1)},m(f,a){E(f,e,a),w(e,l),w(e,s),i||(o=Z(e,"click",ae(r)),i=!0)},p(f,a){t=f,a&2&&n!==(n=t[12]+"")&&U(l,n),a&3&&F(e,"active",t[0].search==t[12]),a&1&&X(e,"color",N.colour(t[11],t[11],t[0].categorise),!1)},d(f){f&&y(e),i=!1,o()}}}function Tt(t){let e=t[2].find(l),n;function l(...i){return t[4](t[12],...i)}let s=e&&Pt(t);return{c(){s&&s.c(),n=x()},m(i,o){s&&s.m(i,o),E(i,n,o)},p(i,o){t=i,o&6&&(e=t[2].find(l)),e?s?s.p(t,o):(s=Pt(t),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(i){s&&s.d(i),i&&y(n)}}}function Rt(t){let e,n,l=t[0].totalise?"Series categories":"Series",s,i,o,r,f=t[0].series,a=[];for(let c=0;c<f.length;c+=1)a[c]=Dt(At(t,f,c));const u=c=>C(a[c],1,1,()=>{a[c]=null});return{c(){e=I("div"),n=I("span"),s=G(l),i=G(":"),o=T();for(let c=0;c<a.length;c+=1)a[c].c();_(n,"class","title svelte-bib0jc"),_(e,"class","series svelte-bib0jc")},m(c,h){E(c,e,h),w(e,n),w(n,s),w(n,i),w(e,o);for(let d=0;d<a.length;d+=1)a[d].m(e,null);r=!0},p(c,h){if((!r||h&1)&&l!==(l=c[0].totalise?"Series categories":"Series")&&U(s,l),h&9){f=c[0].series;let d;for(d=0;d<f.length;d+=1){const g=At(c,f,d);a[d]?(a[d].p(g,h),m(a[d],1)):(a[d]=Dt(g),a[d].c(),m(a[d],1),a[d].m(e,null))}for(B(),d=f.length;d<a.length;d+=1)u(d);q()}},i(c){if(!r){for(let h=0;h<f.length;h+=1)m(a[h]);r=!0}},o(c){a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)C(a[h]);r=!1},d(c){c&&y(e),oe(a,c)}}}function Wt(t){let e,n,l,s,i;return s=new wn({props:{i:0,index:t[11],defaultColour:N.colour(t[11],t[8].colourIndex,t[0].totalise||t[0].categorise),symbolIndex:t[8].symbolIndex,symbols:t[0].symbols,selectedPoint:!1}}),{c(){e=I("span"),n=Q("svg"),l=Q("g"),z(s.$$.fragment),_(l,"transform","translate(4,4)"),_(n,"width","8"),_(n,"height","8"),_(e,"class","symbol svelte-bib0jc")},m(o,r){E(o,e,r),w(e,n),w(n,l),j(s,l,null),i=!0},p(o,r){const f={};r&1&&(f.defaultColour=N.colour(o[11],o[8].colourIndex,o[0].totalise||o[0].categorise)),r&1&&(f.symbolIndex=o[8].symbolIndex),r&1&&(f.symbols=o[0].symbols),s.$set(f)},i(o){i||(m(s.$$.fragment,o),i=!0)},o(o){C(s.$$.fragment,o),i=!1},d(o){o&&y(e),H(s)}}}function Dt(t){let e,n,l=t[8].name+"",s,i,o,r,f,a=t[0].symbols&&Wt(t);function u(){return t[6](t[9])}return{c(){e=I("span"),a&&a.c(),n=T(),s=G(l),i=T(),_(e,"class","series svelte-bib0jc"),_(e,"title","Click to highlight this series"),F(e,"active",Lt(t[0].search,t[9],t[0].selectedPoint,t[11])),X(e,"color",N.colour(t[11],t[8].colourIndex,t[0].categorise||t[0].totalise),!1)},m(c,h){E(c,e,h),a&&a.m(e,null),w(e,n),w(e,s),w(e,i),o=!0,r||(f=Z(e,"click",ae(u)),r=!0)},p(c,h){t=c,t[0].symbols?a?(a.p(t,h),h&1&&m(a,1)):(a=Wt(t),a.c(),m(a,1),a.m(e,n)):a&&(B(),C(a,1,1,()=>{a=null}),q()),(!o||h&1)&&l!==(l=t[8].name+"")&&U(s,l),h&1&&F(e,"active",Lt(t[0].search,t[9],t[0].selectedPoint,t[11])),h&1&&X(e,"color",N.colour(t[11],t[8].colourIndex,t[0].categorise||t[0].totalise),!1)},i(c){o||(m(a),o=!0)},o(c){C(a),o=!1},d(c){c&&y(e),a&&a.d(),r=!1,f()}}}function Wl(t){let e,n,l=(t[1].length>0&&t[2].length>0||t[0].series.length>1)&&Nt(t);return{c(){l&&l.c(),e=x()},m(s,i){l&&l.m(s,i),E(s,e,i),n=!0},p(s,[i]){s[1].length>0&&s[2].length>0||s[0].series.length>1?l?(l.p(s,i),i&7&&m(l,1)):(l=Nt(s),l.c(),m(l,1),l.m(e.parentNode,e)):l&&(B(),C(l,1,1,()=>{l=null}),q())},i(s){n||(m(l),n=!0)},o(s){C(l),n=!1},d(s){l&&l.d(s),s&&y(e)}}}function Lt(t,e,n,l){return t==e||n&&n.index==l}function Dl(t,e,n){let{eventsSubCats:l}=e,{options:s}=e,{filteredEvents:i}=e;const o=ne();function r(c){c!=s.filter?n(0,s.filter=c,s):n(0,s.filter="",s),o("optionsChanged",{name:"filter",data:s.filter})}const f=(c,h)=>h.subCategory==c,a=c=>r(c),u=c=>r(c);return t.$$set=c=>{"eventsSubCats"in c&&n(1,l=c.eventsSubCats),"options"in c&&n(0,s=c.options),"filteredEvents"in c&&n(2,i=c.filteredEvents)},[s,l,i,r,f,a,u]}class Ll extends K{constructor(e){super(),J(this,e,Dl,Wl,Y,{eventsSubCats:1,options:0,filteredEvents:2})}}const he=[];function qe(t,e=O){let n;const l=new Set;function s(r){if(Y(t,r)&&(t=r,n)){const f=!he.length;for(const a of l)a[1](),he.push(a,t);if(f){for(let a=0;a<he.length;a+=2)he[a][0](he[a+1]);he.length=0}}}function i(r){s(r(t))}function o(r,f=O){const a=[r,f];return l.add(a),l.size===1&&(n=e(s)||O),r(t),()=>{l.delete(a),l.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}const Qe=qe(1e3),Ne=qe(!0),Mt=qe(!0),me=qe(!1);function Vt(t,e,n){const l=t.slice();return l[10]=e[n],l}function Ft(t){let e,n;return{c(){e=I("label"),n=G(t[2]),_(e,"for",t[1])},m(l,s){E(l,e,s),w(e,n)},p(l,s){s&4&&U(n,l[2]),s&2&&_(e,"for",l[1])},d(l){l&&y(e)}}}function Gt(t){let e,n=t[10].label+"",l;return{c(){e=I("option"),l=G(n),e.__value=t[10].value,e.value=e.__value,_(e,"class","svelte-rr9340")},m(s,i){E(s,e,i),w(e,l)},p:O,d(s){s&&y(e)}}}function Ml(t){let e,n,l,s,i=t[2]&&Ft(t),o=t[5],r=[];for(let f=0;f<o.length;f+=1)r[f]=Gt(Vt(t,o,f));return{c(){i&&i.c(),e=T(),n=I("select");for(let f=0;f<r.length;f+=1)r[f].c();_(n,"name",t[1]),_(n,"class","svelte-rr9340"),t[0]===void 0&&re(()=>t[8].call(n)),F(n,"mobile",t[3])},m(f,a){i&&i.m(f,a),E(f,e,a),E(f,n,a);for(let u=0;u<r.length;u+=1)r[u].m(n,null);it(n,t[0]),l||(s=[Z(n,"change",t[8]),Z(n,"change",t[9])],l=!0)},p(f,[a]){if(f[2]?i?i.p(f,a):(i=Ft(f),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),a&32){o=f[5];let u;for(u=0;u<o.length;u+=1){const c=Vt(f,o,u);r[u]?r[u].p(c,a):(r[u]=Gt(c),r[u].c(),r[u].m(n,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=o.length}a&2&&_(n,"name",f[1]),a&33&&it(n,f[0]),a&8&&F(n,"mobile",f[3])},i:O,o:O,d(f){i&&i.d(f),f&&y(e),f&&y(n),oe(r,f),l=!1,fe(s)}}}function Vl(t,e,n){let l;te(t,me,d=>n(3,l=d));const s=ne();let{name:i}=e,{label:o=""}=e,{first:r=""}=e,{options:f}=e,{value:a}=e,u=[];r&&u.push({value:r.value?r.value:r,label:r.label?r.label:r}),f.forEach(d=>{u.push({value:d.value?d.value:d,label:d.label?d.label:d})});function c(){a=Sn(this),n(0,a),n(5,u)}const h=()=>s("changed");return t.$$set=d=>{"name"in d&&n(1,i=d.name),"label"in d&&n(2,o=d.label),"first"in d&&n(6,r=d.first),"options"in d&&n(7,f=d.options),"value"in d&&n(0,a=d.value)},[a,i,o,l,s,u,r,f,c,h]}class Fl extends K{constructor(e){super(),J(this,e,Vl,Ml,Y,{name:1,label:2,first:6,options:7,value:0})}}function Gl(t){let e,n,l,s;return{c(){e=I("button"),n=G(t[0]),_(e,"type","button"),e.disabled=t[1],_(e,"class","svelte-6jjh3q")},m(i,o){E(i,e,o),w(e,n),l||(s=Z(e,"click",ae(t[3])),l=!0)},p(i,[o]){o&1&&U(n,i[0]),o&2&&(e.disabled=i[1])},i:O,o:O,d(i){i&&y(e),l=!1,s()}}}function Ol(t,e,n){const l=ne();let{label:s=""}=e,{disabled:i=!1}=e;const o=()=>l("clicked");return t.$$set=r=>{"label"in r&&n(0,s=r.label),"disabled"in r&&n(1,i=r.disabled)},[s,i,l,o]}class tt extends K{constructor(e){super(),J(this,e,Ol,Gl,Y,{label:0,disabled:1})}}function jl(t){let e,n,l,s,i,o,r,f;return{c(){e=I("div"),n=I("input"),l=T(),s=I("div"),i=G("\u2A2F"),_(n,"type","text"),_(n,"placeholder",t[1]),_(n,"class","svelte-csurvc"),_(s,"class","reset svelte-csurvc"),_(s,"disabled",o=t[0]==""),_(e,"class","holder svelte-csurvc"),F(e,"mobile",t[2])},m(a,u){E(a,e,u),w(e,n),st(n,t[0]),w(e,l),w(e,s),w(s,i),r||(f=[Z(n,"input",t[4]),Z(n,"keyup",t[5]),Z(s,"click",t[6])],r=!0)},p(a,[u]){u&2&&_(n,"placeholder",a[1]),u&1&&n.value!==a[0]&&st(n,a[0]),u&1&&o!==(o=a[0]=="")&&_(s,"disabled",o),u&4&&F(e,"mobile",a[2])},i:O,o:O,d(a){a&&y(e),r=!1,fe(f)}}}function Hl(t,e,n){let l;te(t,me,u=>n(2,l=u));const s=ne();let{placeholder:i=""}=e,{search:o=""}=e;function r(){o=this.value,n(0,o)}const f=()=>s("search"),a=()=>{n(0,o=""),s("clear")};return t.$$set=u=>{"placeholder"in u&&n(1,i=u.placeholder),"search"in u&&n(0,o=u.search)},[o,i,l,s,r,f,a]}class Bl extends K{constructor(e){super(),J(this,e,Hl,jl,Y,{placeholder:1,search:0})}}function ql(t){let e,n,l,s,i,o,r,f,a=t[3][0]+"",u,c,h,d=t[3][1]+"",g,k,p;return{c(){e=I("label"),n=I("span"),l=G(t[2]),s=T(),i=I("input"),o=T(),r=I("span"),f=I("span"),u=G(a),c=T(),h=I("span"),g=G(d),_(n,"class","label svelte-1wiiax2"),_(i,"type","checkbox"),_(i,"name",t[1]),_(i,"id",t[1]),i.disabled=t[4],_(i,"class","svelte-1wiiax2"),_(f,"class","toggle off svelte-1wiiax2"),F(f,"active",t[0]==!1),_(h,"class","toggle on svelte-1wiiax2"),F(h,"active",t[0]),_(r,"class","holder svelte-1wiiax2"),F(r,"disabled",t[4]),F(r,"touch",t[6]),_(e,"for",t[1]),_(e,"class","svelte-1wiiax2"),F(e,"mobile",t[5])},m(b,v){E(b,e,v),w(e,n),w(n,l),w(e,s),w(e,i),i.checked=t[0],w(e,o),w(e,r),w(r,f),w(f,u),w(r,c),w(r,h),w(h,g),k||(p=[Z(i,"change",t[8]),Z(i,"change",t[9])],k=!0)},p(b,[v]){v&4&&U(l,b[2]),v&2&&_(i,"name",b[1]),v&2&&_(i,"id",b[1]),v&16&&(i.disabled=b[4]),v&1&&(i.checked=b[0]),v&8&&a!==(a=b[3][0]+"")&&U(u,a),v&1&&F(f,"active",b[0]==!1),v&8&&d!==(d=b[3][1]+"")&&U(g,d),v&1&&F(h,"active",b[0]),v&16&&F(r,"disabled",b[4]),v&64&&F(r,"touch",b[6]),v&2&&_(e,"for",b[1]),v&32&&F(e,"mobile",b[5])},i:O,o:O,d(b){b&&y(e),k=!1,fe(p)}}}function zl(t,e,n){let l,s;te(t,me,d=>n(5,l=d)),te(t,Ne,d=>n(6,s=d));const i=ne();let{name:o="name"}=e,{label:r=""}=e,{options:f=["Off","On"]}=e,{value:a=!1}=e,{disabled:u=!1}=e;function c(){a=this.checked,n(0,a)}const h=()=>i("changed");return t.$$set=d=>{"name"in d&&n(1,o=d.name),"label"in d&&n(2,r=d.label),"options"in d&&n(3,f=d.options),"value"in d&&n(0,a=d.value),"disabled"in d&&n(4,u=d.disabled)},[a,o,r,f,u,l,s,i,c,h]}class xe extends K{constructor(e){super(),J(this,e,zl,ql,Y,{name:1,label:2,options:3,value:0,disabled:4})}}function Xl(t){let e,n=t[3][t[7]]+"",l,s,i,o;return{c(){e=I("div"),l=G(n),_(e,"class","draggable svelte-ztcokp"),_(e,"style",s=`min-width:${t[9]}px; left:${t[9]*t[6]}px`),F(e,"dragging",t[5])},m(r,f){E(r,e,f),w(e,l),t[15](e),i||(o=Z(e,"mousedown",t[10]),i=!0)},p(r,f){f&136&&n!==(n=r[3][r[7]]+"")&&U(l,n),f&64&&s!==(s=`min-width:${r[9]}px; left:${r[9]*r[6]}px`)&&_(e,"style",s),f&32&&F(e,"dragging",r[5])},d(r){r&&y(e),t[15](null),i=!1,o()}}}function Ul(t){let e,n,l=t[3][t[0]]+"",s,i;function o(h,d){return h[0]>h[1]?Jl:Yl}let r=o(t),f=r(t);function a(h,d){return h[0]<h[2]?Zl:Kl}let u=a(t),c=u(t);return{c(){e=I("div"),f.c(),n=T(),s=G(l),i=T(),c.c(),_(e,"class","touch svelte-ztcokp")},m(h,d){E(h,e,d),f.m(e,null),w(e,n),w(e,s),w(e,i),c.m(e,null)},p(h,d){r===(r=o(h))&&f?f.p(h,d):(f.d(1),f=r(h),f&&(f.c(),f.m(e,n))),d&9&&l!==(l=h[3][h[0]]+"")&&U(s,l),u===(u=a(h))&&c?c.p(h,d):(c.d(1),c=u(h),c&&(c.c(),c.m(e,null)))},d(h){h&&y(e),f.d(),c.d()}}}function Yl(t){let e;return{c(){e=G("\xA0")},m(n,l){E(n,e,l)},p:O,d(n){n&&y(e)}}}function Jl(t){let e,n,l;return{c(){e=I("button"),e.textContent="\u25C0",_(e,"type","button"),_(e,"class","svelte-ztcokp")},m(s,i){E(s,e,i),n||(l=Z(e,"click",ae(t[11])),n=!0)},p:O,d(s){s&&y(e),n=!1,l()}}}function Kl(t){let e;return{c(){e=G("\xA0")},m(n,l){E(n,e,l)},p:O,d(n){n&&y(e)}}}function Zl(t){let e,n,l;return{c(){e=I("button"),e.textContent="\u25B6",_(e,"type","button"),_(e,"class","svelte-ztcokp")},m(s,i){E(s,e,i),n||(l=Z(e,"click",ae(t[12])),n=!0)},p:O,d(s){s&&y(e),n=!1,l()}}}function Ql(t){let e;function n(i,o){return i[8]?Ul:Xl}let l=n(t),s=l(t);return{c(){s.c(),e=x()},m(i,o){s.m(i,o),E(i,e,o)},p(i,[o]){l===(l=n(i))&&s?s.p(i,o):(s.d(1),s=l(i),s&&(s.c(),s.m(e.parentNode,e)))},i:O,o:O,d(i){s.d(i),i&&y(e)}}}function xl(t,e,n){let l;te(t,Ne,W=>n(8,l=W));let{drawingWidth:s}=e,{value:i}=e,{min:o}=e,{max:r}=e,{type:f}=e,{labels:a}=e;const u=ne();let c,h=0,d=!1,g=parseInt(s/a.length),k=i,p="";function b(){if(l)return;n(5,d=!0);const W=o*g,M=r*g;h=c.parentNode.getBoundingClientRect().left,document.body.onmousemove=ee=>{let L=ee.clientX-h-g/2-5;L<W?L=W:L>M&&(L=M),n(6,k=L/g),n(7,p=Math.floor(k))};const R=function(){n(5,d=!1),document.body.onmousemove=null,document.body.onmouseup=null,document.body.onmouseleave=null,n(0,i=Math.floor(k)),u("rangeChanged",{type:f,value:i})};document.body.onmouseup=ee=>{R()},document.body.onmouseleave=ee=>{R()}}function v(){n(0,i--,i),u("rangeChanged",{type:f,value:i})}function A(){n(0,i++,i),u("rangeChanged",{type:f,value:i})}function D(W){le[W?"unshift":"push"](()=>{c=W,n(4,c)})}return t.$$set=W=>{"drawingWidth"in W&&n(13,s=W.drawingWidth),"value"in W&&n(0,i=W.value),"min"in W&&n(1,o=W.min),"max"in W&&n(2,r=W.max),"type"in W&&n(14,f=W.type),"labels"in W&&n(3,a=W.labels)},t.$$.update=()=>{t.$$.dirty&1&&i!=-1&&(n(6,k=i),n(7,p=i))},[i,o,r,a,c,d,k,p,l,g,b,v,A,s,f,D]}class Ot extends K{constructor(e){super(),J(this,e,xl,Ql,Y,{drawingWidth:13,value:0,min:1,max:2,type:14,labels:3})}}function $l(t){let e,n,l,s,i;return n=new Ot({props:{drawingWidth:t[0],value:t[2],labels:t[1],min:0,max:t[3]-1,type:"min"}}),n.$on("rangeChanged",t[5]),s=new Ot({props:{drawingWidth:t[0],value:t[3],labels:t[1],min:t[2]+1,max:t[1].length-1,type:"max"}}),s.$on("rangeChanged",t[6]),{c(){e=I("div"),z(n.$$.fragment),l=T(),z(s.$$.fragment),_(e,"class","date-range svelte-21kt4x"),F(e,"touch",t[4])},m(o,r){E(o,e,r),j(n,e,null),w(e,l),j(s,e,null),i=!0},p(o,[r]){const f={};r&1&&(f.drawingWidth=o[0]),r&4&&(f.value=o[2]),r&2&&(f.labels=o[1]),r&8&&(f.max=o[3]-1),n.$set(f);const a={};r&1&&(a.drawingWidth=o[0]),r&8&&(a.value=o[3]),r&2&&(a.labels=o[1]),r&4&&(a.min=o[2]+1),r&2&&(a.max=o[1].length-1),s.$set(a),r&16&&F(e,"touch",o[4])},i(o){i||(m(n.$$.fragment,o),m(s.$$.fragment,o),i=!0)},o(o){C(n.$$.fragment,o),C(s.$$.fragment,o),i=!1},d(o){o&&y(e),H(n),H(s)}}}function es(t,e,n){let l;te(t,Ne,u=>n(4,l=u));let{drawingWidth:s}=e,{labels:i}=e,{minValue:o}=e,{maxValue:r}=e;function f(u){Ue.call(this,t,u)}function a(u){Ue.call(this,t,u)}return t.$$set=u=>{"drawingWidth"in u&&n(0,s=u.drawingWidth),"labels"in u&&n(1,i=u.labels),"minValue"in u&&n(2,o=u.minValue),"maxValue"in u&&n(3,r=u.maxValue)},[s,i,o,r,l,f,a]}class ts extends K{constructor(e){super(),J(this,e,es,$l,Y,{drawingWidth:0,labels:1,minValue:2,maxValue:3})}}function ns(t){let e,n,l;return n=new ts({props:{drawingWidth:t[0],labels:t[3].labels,minValue:t[1],maxValue:t[2]}}),n.$on("rangeChanged",t[4]),{c(){e=I("div"),z(n.$$.fragment),X(e,"padding-left",N.CANVAS_PADDING_LEFT+"px"),X(e,"padding-right",N.CANVAS_PADDING_RIGHT+"px"),_(e,"class","svelte-runp49")},m(s,i){E(s,e,i),j(n,e,null),l=!0},p(s,[i]){const o={};i&1&&(o.drawingWidth=s[0]),i&2&&(o.minValue=s[1]),i&4&&(o.maxValue=s[2]),n.$set(o)},i(s){l||(m(n.$$.fragment,s),l=!0)},o(s){C(n.$$.fragment,s),l=!1},d(s){s&&y(e),H(n)}}}function ls(t,e,n){let{drawingWidth:l}=e,{xAxis:s}=e,{options:i}=e;const o=ne();let r={...s},f=0,a=r.values.length-1,u=0,c=0;function h(){u=i.xRange.start,c=i.xRange.end;for(let g=0;g<r.values.length-1;g++)u>=r.values[g]&&n(1,f=g);n(2,a=r.values.length-1);for(let g=r.values.length-2;g>f;g--)if(c>=r.values[g]){const k=c-r.values[g],p=r.values[g+1]-c;n(2,a=k<=p?g:g+1);break}}function d(g){g.detail.type=="min"?(n(5,i.xRange.start=r.values[g.detail.value],i),n(5,i.xRange.range=i.xRange.end-i.xRange.start,i),u=i.xRange.start,n(1,f=g.detail.value)):g.detail.type=="max"&&(n(5,i.xRange.end=r.values[g.detail.value],i),n(5,i.xRange.range=i.xRange.end-i.xRange.start,i),c=i.xRange.end,n(2,a=g.detail.value)),o("optionsChanged",{name:"xRange",data:i.xRange})}return t.$$set=g=>{"drawingWidth"in g&&n(0,l=g.drawingWidth),"xAxis"in g&&n(6,s=g.xAxis),"options"in g&&n(5,i=g.options)},t.$$.update=()=>{t.$$.dirty&64&&s&&h()},[l,f,a,r,d,i,s]}class ss extends K{constructor(e){super(),J(this,e,ls,ns,Y,{drawingWidth:0,xAxis:6,options:5})}}function jt(t){let e,n,l,s=t[2]>0&&Ht(t),i=t[2]>1&&Bt(t);return{c(){s&&s.c(),e=T(),i&&i.c(),n=x()},m(o,r){s&&s.m(o,r),E(o,e,r),i&&i.m(o,r),E(o,n,r),l=!0},p(o,r){o[2]>0?s?(s.p(o,r),r&4&&m(s,1)):(s=Ht(o),s.c(),m(s,1),s.m(e.parentNode,e)):s&&(B(),C(s,1,1,()=>{s=null}),q()),o[2]>1?i?(i.p(o,r),r&4&&m(i,1)):(i=Bt(o),i.c(),m(i,1),i.m(n.parentNode,n)):i&&(B(),C(i,1,1,()=>{i=null}),q())},i(o){l||(m(s),m(i),l=!0)},o(o){C(s),C(i),l=!1},d(o){s&&s.d(o),o&&y(e),i&&i.d(o),o&&y(n)}}}function Ht(t){let e,n,l;function s(o){t[8](o)}let i={name:"symbols",label:"Symbols"};return t[0].symbols!==void 0&&(i.value=t[0].symbols),e=new xe({props:i}),le.push(()=>Ie(e,"value",s)),e.$on("changed",t[9]),{c(){z(e.$$.fragment)},m(o,r){j(e,o,r),l=!0},p(o,r){const f={};!n&&r&1&&(n=!0,f.value=o[0].symbols,Ae(()=>n=!1)),e.$set(f)},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){C(e.$$.fragment,o),l=!1},d(o){H(e,o)}}}function Bt(t){let e,n,l,s,i,o;function r(c){t[10](c)}let f={name:"categorise",label:"Colour by",options:["Series","Category"],disabled:t[0].totalise};t[0].categorise!==void 0&&(f.value=t[0].categorise),e=new xe({props:f}),le.push(()=>Ie(e,"value",r)),e.$on("changed",t[11]);function a(c){t[12](c)}let u={name:"totalise",label:"Grouping"};return t[0].totalise!==void 0&&(u.value=t[0].totalise),s=new xe({props:u}),le.push(()=>Ie(s,"value",a)),s.$on("changed",t[13]),{c(){z(e.$$.fragment),l=T(),z(s.$$.fragment)},m(c,h){j(e,c,h),E(c,l,h),j(s,c,h),o=!0},p(c,h){const d={};h&1&&(d.disabled=c[0].totalise),!n&&h&1&&(n=!0,d.value=c[0].categorise,Ae(()=>n=!1)),e.$set(d);const g={};!i&&h&1&&(i=!0,g.value=c[0].totalise,Ae(()=>i=!1)),s.$set(g)},i(c){o||(m(e.$$.fragment,c),m(s.$$.fragment,c),o=!0)},o(c){C(e.$$.fragment,c),C(s.$$.fragment,c),o=!1},d(c){H(e,c),c&&y(l),H(s,c)}}}function qt(t){let e,n,l,s,i,o;function r(c){t[14](c)}let f={name:"category",options:[{value:"x",label:`Sort by ${t[1]}`},{value:"category",label:"Sort by category"}]};t[0].sort!==void 0&&(f.value=t[0].sort),e=new Fl({props:f}),le.push(()=>Ie(e,"value",r)),e.$on("changed",t[15]);function a(c){t[16](c)}let u={placeholder:"Find event"};return t[0].search!==void 0&&(u.search=t[0].search),s=new Bl({props:u}),le.push(()=>Ie(s,"search",a)),s.$on("search",t[17]),s.$on("clear",t[18]),{c(){z(e.$$.fragment),l=T(),z(s.$$.fragment)},m(c,h){j(e,c,h),E(c,l,h),j(s,c,h),o=!0},p(c,h){const d={};h&2&&(d.options=[{value:"x",label:`Sort by ${c[1]}`},{value:"category",label:"Sort by category"}]),!n&&h&1&&(n=!0,d.value=c[0].sort,Ae(()=>n=!1)),e.$set(d);const g={};!i&&h&1&&(i=!0,g.search=c[0].search,Ae(()=>i=!1)),s.$set(g)},i(c){o||(m(e.$$.fragment,c),m(s.$$.fragment,c),o=!0)},o(c){C(e.$$.fragment,c),C(s.$$.fragment,c),o=!1},d(c){H(e,c),c&&y(l),H(s,c)}}}function zt(t){let e,n;return e=new tt({props:{label:"Focus",disabled:t[0].selectedEvent==!1}}),e.$on("clicked",t[19]),{c(){z(e.$$.fragment)},m(l,s){j(e,l,s),n=!0},p(l,s){const i={};s&1&&(i.disabled=l[0].selectedEvent==!1),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){C(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function is(t){let e,n,l,s,i,o,r,f=t[0].readonly===!1&&jt(t),a=t[3]>0&&qt(t),u=t[3]>0&&zt(t);return o=new tt({props:{label:"Reset",disabled:t[4].start==t[0].xRange.start&&t[4].end==t[0].xRange.end&&t[0].filter==""&&t[0].search==""}}),o.$on("clicked",t[20]),{c(){e=I("div"),f&&f.c(),n=T(),a&&a.c(),l=T(),s=I("div"),u&&u.c(),i=T(),z(o.$$.fragment),_(s,"class","buttons svelte-1o6s0l5"),_(e,"class","form svelte-1o6s0l5")},m(c,h){E(c,e,h),f&&f.m(e,null),w(e,n),a&&a.m(e,null),w(e,l),w(e,s),u&&u.m(s,null),w(s,i),j(o,s,null),r=!0},p(c,[h]){c[0].readonly===!1?f?(f.p(c,h),h&1&&m(f,1)):(f=jt(c),f.c(),m(f,1),f.m(e,n)):f&&(B(),C(f,1,1,()=>{f=null}),q()),c[3]>0?a?(a.p(c,h),h&8&&m(a,1)):(a=qt(c),a.c(),m(a,1),a.m(e,l)):a&&(B(),C(a,1,1,()=>{a=null}),q()),c[3]>0?u?(u.p(c,h),h&8&&m(u,1)):(u=zt(c),u.c(),m(u,1),u.m(s,i)):u&&(B(),C(u,1,1,()=>{u=null}),q());const d={};h&17&&(d.disabled=c[4].start==c[0].xRange.start&&c[4].end==c[0].xRange.end&&c[0].filter==""&&c[0].search==""),o.$set(d)},i(c){r||(m(f),m(a),m(u),m(o.$$.fragment,c),r=!0)},o(c){C(f),C(a),C(u),C(o.$$.fragment,c),r=!1},d(c){c&&y(e),f&&f.d(),a&&a.d(),u&&u.d(),H(o)}}}function os(t,e,n){let{xAxis:l}=e,{xUnit:s}=e,{seriesLength:i}=e,{eventsLength:o}=e,{options:r}=e;const f=ne();let a={...r.xRange},u=r.symbols,c=r.categorise,h=r.totalise;r.zoomIn=()=>{d(!0)};function d(L){var be,Pe,Te;if(L){if(a===void 0&&n(4,a={...r.xRange}),r.selectedEvent){if(n(0,r.xRange.start=r.selectedEvent.start.decimal,r),((Pe=(be=r.selectedEvent)==null?void 0:be.end)==null?void 0:Pe.decimal)!==void 0)n(0,r.xRange.end=r.selectedEvent.end.decimal,r);else if(((Te=r.selectedEvent)==null?void 0:Te.end)==="-")n(0,r.xRange.end=l.majorLast,r);else{let pe=r.xRange.start+l.majorRange/20;pe>l.majorLast&&(pe=l.majorLast),n(0,r.xRange.end=pe,r)}n(0,r.xRange.range=r.xRange.end-r.xRange.start,r),console.log("options.xRange",r.xRange),f("optionsChanged",{name:"xRange",data:r.xRange})}}else n(0,r.selectedEvent=!1,r),n(0,r.search="",r),n(0,r.filter="",r),n(0,r.xRange={...a},r),n(0,r.symbols=u,r),n(0,r.categorise=c,r),n(0,r.totalise=h,r),f("optionsChanged",{name:"selectedEvent",data:r.selectedEvent}),f("optionsChanged",{name:"xRange",data:r.xRange})}function g(L){t.$$.not_equal(r.symbols,L)&&(r.symbols=L,n(0,r))}const k=()=>f("optionsChanged",{name:"symbols",data:r.symbols});function p(L){t.$$.not_equal(r.categorise,L)&&(r.categorise=L,n(0,r))}const b=()=>f("optionsChanged",{name:"categorise",data:r.categorise});function v(L){t.$$.not_equal(r.totalise,L)&&(r.totalise=L,n(0,r))}const A=()=>{f("optionsChanged",{name:"totalise",data:r.totalise}),r.totalise&&(n(0,r.categorise=!0,r),f("optionsChanged",{name:"categorise",data:r.categorise}))};function D(L){t.$$.not_equal(r.sort,L)&&(r.sort=L,n(0,r))}const W=()=>f("optionsChanged",{name:"sort",data:r.sort});function M(L){t.$$.not_equal(r.search,L)&&(r.search=L,n(0,r))}const P=()=>{f("optionsChanged",{name:"search",data:r.search})},R=()=>{n(0,r.selectedEvent=!1,r),f("optionsChanged",{name:"search",data:r.search}),f("optionsChanged",{name:"selectedEvent",data:r.selectedEvent})},ee=()=>d(!0),Se=()=>d(!1);return t.$$set=L=>{"xAxis"in L&&n(7,l=L.xAxis),"xUnit"in L&&n(1,s=L.xUnit),"seriesLength"in L&&n(2,i=L.seriesLength),"eventsLength"in L&&n(3,o=L.eventsLength),"options"in L&&n(0,r=L.options)},[r,s,i,o,a,f,d,l,g,k,p,b,v,A,D,W,M,P,R,ee,Se]}class rs extends K{constructor(e){super(),J(this,e,os,is,Y,{xAxis:7,xUnit:1,seriesLength:2,eventsLength:3,options:0})}}function Xt(t){let e,n,l,s=t[0].index!=-1&&Ut(t);return{c(){e=I("div"),s&&s.c(),_(e,"class","properties svelte-1rknnh2"),F(e,"mobile",t[1])},m(i,o){E(i,e,o),s&&s.m(e,null),l=!0},p(i,o){i[0].index!=-1?s?(s.p(i,o),o&1&&m(s,1)):(s=Ut(i),s.c(),m(s,1),s.m(e,null)):s&&(B(),C(s,1,1,()=>{s=null}),q()),o&2&&F(e,"mobile",i[1])},i(i){l||(m(s),re(()=>{n||(n=ue(e,He,{},!0)),n.run(1)}),l=!0)},o(i){C(s),n||(n=ue(e,He,{},!1)),n.run(0),l=!1},d(i){i&&y(e),s&&s.d(),i&&n&&n.end()}}}function Ut(t){let e,n,l,s,i=t[0].name+"",o,r,f,a=N.eventDates(t[0])+"",u,c,h,d=t[0].summary+"",g,k,p;n=new tt({props:{label:"Close"}}),n.$on("clicked",t[2]);let b=t[0].citations&&Yt(t);return{c(){e=I("div"),z(n.$$.fragment),l=T(),s=I("h3"),o=G(i),r=T(),f=I("span"),u=G(a),c=T(),h=I("div"),g=T(),b&&b.c(),k=x(),_(e,"class","button svelte-1rknnh2"),_(f,"class","svelte-1rknnh2"),_(s,"class","svelte-1rknnh2"),_(h,"class","summary")},m(v,A){E(v,e,A),j(n,e,null),E(v,l,A),E(v,s,A),w(s,o),w(s,r),w(s,f),w(f,u),E(v,c,A),E(v,h,A),h.innerHTML=d,E(v,g,A),b&&b.m(v,A),E(v,k,A),p=!0},p(v,A){(!p||A&1)&&i!==(i=v[0].name+"")&&U(o,i),(!p||A&1)&&a!==(a=N.eventDates(v[0])+"")&&U(u,a),(!p||A&1)&&d!==(d=v[0].summary+"")&&(h.innerHTML=d),v[0].citations?b?b.p(v,A):(b=Yt(v),b.c(),b.m(k.parentNode,k)):b&&(b.d(1),b=null)},i(v){p||(m(n.$$.fragment,v),p=!0)},o(v){C(n.$$.fragment,v),p=!1},d(v){v&&y(e),H(n),v&&y(l),v&&y(s),v&&y(c),v&&y(h),v&&y(g),b&&b.d(v),v&&y(k)}}}function Yt(t){let e,n,l,s=t[0].citations+"";return{c(){e=I("h3"),e.textContent="Find out more",n=T(),l=I("div"),_(e,"class","svelte-1rknnh2")},m(i,o){E(i,e,o),E(i,n,o),E(i,l,o),l.innerHTML=s},p(i,o){o&1&&s!==(s=i[0].citations+"")&&(l.innerHTML=s)},d(i){i&&y(e),i&&y(n),i&&y(l)}}}function fs(t){let e,n,l=t[0]!==!1&&Xt(t);return{c(){l&&l.c(),e=x()},m(s,i){l&&l.m(s,i),E(s,e,i),n=!0},p(s,[i]){s[0]!==!1?l?(l.p(s,i),i&1&&m(l,1)):(l=Xt(s),l.c(),m(l,1),l.m(e.parentNode,e)):l&&(B(),C(l,1,1,()=>{l=null}),q())},i(s){n||(m(l),n=!0)},o(s){C(l),n=!1},d(s){l&&l.d(s),s&&y(e)}}}function as(t,e,n){let l;te(t,me,r=>n(1,l=r));let{selectedEvent:s}=e;const i=ne();function o(){n(0,s=!1),i("optionsChanged",{name:"selectedEvent",data:s})}return t.$$set=r=>{"selectedEvent"in r&&n(0,s=r.selectedEvent)},[s,l,o]}class us extends K{constructor(e){super(),J(this,e,as,fs,Y,{selectedEvent:0})}}function Jt(t,e,n){const l=t.slice();return l[7]=e[n],l}function Kt(t){let e,n,l,s,i=t[0].selectedPoint.name+"",o,r,f,a,u,c,h,d,g,k=t[0].series[t[0].selectedPoint.index]!=null&&Zt(t),p=t[0].selectedPoint.citations&&xt(t);return{c(){e=I("div"),n=I("h3"),l=G("Selected series: "),s=I("span"),o=G(i),r=T(),f=I("div"),a=I("header"),a.innerHTML=`<div>Value</div> 
                <div class="date">Date</div>`,u=T(),c=I("div"),k&&k.c(),h=T(),p&&p.c(),_(s,"class","subtitle svelte-1vt391o"),_(n,"class","svelte-1vt391o"),_(a,"class","svelte-1vt391o"),_(c,"class","body svelte-1vt391o"),_(f,"class","table svelte-1vt391o"),_(e,"class","properties svelte-1vt391o"),X(e,"max-width",t[1]+N.CANVAS_PADDING_LEFT+N.CANVAS_PADDING_RIGHT+"px"),X(e,"margin-left",-N.CANVAS_PADDING_LEFT+"px"),X(e,"margin-right",-N.CANVAS_PADDING_RIGHT+"px"),X(e,"padding-left",N.CANVAS_PADDING_LEFT+"px"),X(e,"padding-right",N.CANVAS_PADDING_RIGHT+"px")},m(b,v){E(b,e,v),w(e,n),w(n,l),w(n,s),w(s,o),w(e,r),w(e,f),w(f,a),w(f,u),w(f,c),k&&k.m(c,null),t[5](c),w(e,h),p&&p.m(e,null),g=!0},p(b,v){(!g||v&1)&&i!==(i=b[0].selectedPoint.name+"")&&U(o,i),b[0].series[b[0].selectedPoint.index]!=null?k?k.p(b,v):(k=Zt(b),k.c(),k.m(c,null)):k&&(k.d(1),k=null),b[0].selectedPoint.citations?p?p.p(b,v):(p=xt(b),p.c(),p.m(e,null)):p&&(p.d(1),p=null),(!g||v&2)&&X(e,"max-width",b[1]+N.CANVAS_PADDING_LEFT+N.CANVAS_PADDING_RIGHT+"px")},i(b){g||(re(()=>{d||(d=ue(e,He,{duration:500},!0)),d.run(1)}),g=!0)},o(b){d||(d=ue(e,He,{duration:500},!1)),d.run(0),g=!1},d(b){b&&y(e),k&&k.d(),t[5](null),p&&p.d(),b&&d&&d.end()}}}function Zt(t){let e,n=t[0].series[t[0].selectedPoint.index].data,l=[];for(let s=0;s<n.length;s+=1)l[s]=Qt(Jt(t,n,s));return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=x()},m(s,i){for(let o=0;o<l.length;o+=1)l[o].m(s,i);E(s,e,i)},p(s,i){if(i&9){n=s[0].series[s[0].selectedPoint.index].data;let o;for(o=0;o<n.length;o+=1){const r=Jt(s,n,o);l[o]?l[o].p(r,i):(l[o]=Qt(r),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(s){oe(l,s),s&&y(e)}}}function Qt(t){let e,n,l=N.formatNumber(t[7].value)+"",s,i,o,r=t[7].xLabel+"",f,a,u,c;function h(){return t[4](t[7])}return{c(){e=I("div"),n=I("div"),s=G(l),i=T(),o=I("div"),f=G(r),a=T(),_(o,"class","x svelte-1vt391o"),_(e,"class","col svelte-1vt391o"),F(e,"active",t[0].selectedPoint.i==t[7].i)},m(d,g){E(d,e,g),w(e,n),w(n,s),w(e,i),w(e,o),w(o,f),w(e,a),u||(c=Z(e,"click",ae(h)),u=!0)},p(d,g){t=d,g&1&&l!==(l=N.formatNumber(t[7].value)+"")&&U(s,l),g&1&&r!==(r=t[7].xLabel+"")&&U(f,r),g&1&&F(e,"active",t[0].selectedPoint.i==t[7].i)},d(d){d&&y(e),u=!1,c()}}}function xt(t){let e,n,l,s=t[0].selectedPoint.citations+"",i;return{c(){e=I("h4"),e.textContent="Source",n=T(),l=new Pn(!1),i=x(),_(e,"class","svelte-1vt391o"),l.a=i},m(o,r){E(o,e,r),E(o,n,r),l.m(s,o,r),E(o,i,r)},p(o,r){r&1&&s!==(s=o[0].selectedPoint.citations+"")&&l.p(s)},d(o){o&&y(e),o&&y(n),o&&y(i),o&&l.d()}}}function cs(t){let e,n,l=t[0].selectedPoint!==!1&&Kt(t);return{c(){l&&l.c(),e=x()},m(s,i){l&&l.m(s,i),E(s,e,i),n=!0},p(s,[i]){s[0].selectedPoint!==!1?l?(l.p(s,i),i&1&&m(l,1)):(l=Kt(s),l.c(),m(l,1),l.m(e.parentNode,e)):l&&(B(),C(l,1,1,()=>{l=null}),q())},i(s){n||(m(l),n=!0)},o(s){C(l),n=!1},d(s){l&&l.d(s),s&&y(e)}}}function ds(t,e,n){let{options:l}=e,{viewportWidth:s}=e;const i=ne();let o;function r(u){n(0,l.selectedPoint.i=u,l),i("optionsChanged",{name:"selected",data:l.selectedPoint})}Ln(()=>{if(o){const u=o.querySelector(".active");u&&u.scrollIntoView({block:"center"})}else n(2,o=void 0)});const f=u=>r(u.i);function a(u){le[u?"unshift":"push"](()=>{o=u,n(2,o)})}return t.$$set=u=>{"options"in u&&n(0,l=u.options),"viewportWidth"in u&&n(1,s=u.viewportWidth)},[l,s,o,r,f,a]}class hs extends K{constructor(e){super(),J(this,e,ds,cs,Y,{options:0,viewportWidth:1})}}function $t(t){let e,n,l=t[5](t[3],t[2],t[4])+"",s,i;return{c(){e=I("span"),n=G("("),s=G(l),i=G(")"),_(e,"class","subtitle svelte-nnc87q")},m(o,r){E(o,e,r),w(e,n),w(e,s),w(e,i)},p(o,r){r&28&&l!==(l=o[5](o[3],o[2],o[4])+"")&&U(s,l)},d(o){o&&y(e)}}}function _s(t){let e,n,l,s,i=t[1]>1&&$t(t);return{c(){e=I("figCaption"),n=I("h3"),l=G(t[0]),s=T(),i&&i.c(),_(n,"class","svelte-nnc87q"),_(e,"class","svelte-nnc87q")},m(o,r){E(o,e,r),w(e,n),w(n,l),w(n,s),i&&i.m(n,null)},p(o,[r]){r&1&&U(l,o[0]),o[1]>1?i?i.p(o,r):(i=$t(o),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:O,o:O,d(o){o&&y(e),i&&i.d()}}}function gs(t,e,n){let{title:l}=e,{nSeries:s}=e,{categorised:i}=e,{grouped:o}=e,{filter:r}=e;function f(a,u){let c="";return a&&u?c="series grouped and coloured by category":u?c="individual series, coloured by category":c="individually coloured series",r&&(c=c+", highlighting "+r),c}return t.$$set=a=>{"title"in a&&n(0,l=a.title),"nSeries"in a&&n(1,s=a.nSeries),"categorised"in a&&n(2,i=a.categorised),"grouped"in a&&n(3,o=a.grouped),"filter"in a&&n(4,r=a.filter)},[l,s,i,o,r,f]}class ms extends K{constructor(e){super(),J(this,e,gs,_s,Y,{title:0,nSeries:1,categorised:2,grouped:3,filter:4})}}function en(t){let e,n;return e=new rs({props:{options:t[1],xAxis:t[2].xAxis,xUnit:t[2].xUnit,seriesLength:t[2].series.length,eventsLength:t[2].events.length}}),e.$on("optionsChanged",t[10]),{c(){z(e.$$.fragment)},m(l,s){j(e,l,s),n=!0},p(l,s){const i={};s&2&&(i.options=l[1]),s&4&&(i.xAxis=l[2].xAxis),s&4&&(i.xUnit=l[2].xUnit),s&4&&(i.seriesLength=l[2].series.length),s&4&&(i.eventsLength=l[2].events.length),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){C(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function tn(t){let e,n,l,s,i=t[6].length>0&&nn(t),o=t[7].length>0&&ln(t);return l=new pl({props:{xAxis:t[2].xAxis,viewportWidth:t[0],drawingWidth:t[4]}}),{c(){i&&i.c(),e=T(),o&&o.c(),n=T(),z(l.$$.fragment)},m(r,f){i&&i.m(r,f),E(r,e,f),o&&o.m(r,f),E(r,n,f),j(l,r,f),s=!0},p(r,f){r[6].length>0?i?(i.p(r,f),f&64&&m(i,1)):(i=nn(r),i.c(),m(i,1),i.m(e.parentNode,e)):i&&(B(),C(i,1,1,()=>{i=null}),q()),r[7].length>0?o?(o.p(r,f),f&128&&m(o,1)):(o=ln(r),o.c(),m(o,1),o.m(n.parentNode,n)):o&&(B(),C(o,1,1,()=>{o=null}),q());const a={};f&4&&(a.xAxis=r[2].xAxis),f&1&&(a.viewportWidth=r[0]),f&16&&(a.drawingWidth=r[4]),l.$set(a)},i(r){s||(m(i),m(o),m(l.$$.fragment,r),s=!0)},o(r){C(i),C(o),C(l.$$.fragment,r),s=!1},d(r){i&&i.d(r),r&&y(e),o&&o.d(r),r&&y(n),H(l,r)}}}function nn(t){let e,n;return e=new Al({props:{events:t[6],size:t[6].length,viewportWidth:t[0],options:t[1]}}),e.$on("optionsChanged",t[10]),{c(){z(e.$$.fragment)},m(l,s){j(e,l,s),n=!0},p(l,s){const i={};s&64&&(i.events=l[6]),s&64&&(i.size=l[6].length),s&1&&(i.viewportWidth=l[0]),s&2&&(i.options=l[1]),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){C(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function ln(t){let e,n;return e=new Rl({props:{series:t[7],groups:t[8],viewportWidth:t[0],drawingWidth:t[4],paddingLeft:N.CANVAS_PADDING_LEFT,options:t[1]}}),e.$on("optionsChanged",t[10]),{c(){z(e.$$.fragment)},m(l,s){j(e,l,s),n=!0},p(l,s){const i={};s&128&&(i.series=l[7]),s&256&&(i.groups=l[8]),s&1&&(i.viewportWidth=l[0]),s&16&&(i.drawingWidth=l[4]),s&2&&(i.options=l[1]),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){C(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function sn(t){let e,n;return e=new ss({props:{drawingWidth:t[4],xAxis:t[2].xAxis,options:t[1]}}),e.$on("optionsChanged",t[10]),{c(){z(e.$$.fragment)},m(l,s){j(e,l,s),n=!0},p(l,s){const i={};s&16&&(i.drawingWidth=l[4]),s&4&&(i.xAxis=l[2].xAxis),s&2&&(i.options=l[1]),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){C(e.$$.fragment,l),n=!1},d(l){H(e,l)}}}function bs(t){let e,n,l,s,i,o,r,f,a,u,c,h,d,g,k;n=new ms({props:{nSeries:t[2].series.length>1,categorised:t[1].categorise,grouped:t[1].totalise,filter:t[1].filter,title:t[1].title||t[2].name}});let p=t[1].readonly===!1&&en(t),b=t[5]!==0&&tn(t),v=t[4]!=0&&t[5]!==0&&t[1].readonly===!1&&sn(t);return f=new Ll({props:{eventsSubCats:t[2].eventsSubCats,filteredEvents:t[6],options:t[1]}}),f.$on("optionsChanged",t[10]),u=new us({props:{selectedEvent:t[1].selectedEvent}}),u.$on("optionsChanged",t[10]),h=new hs({props:{options:t[1],viewportWidth:t[0]}}),h.$on("optionsChanged",t[10]),{c(){e=I("figure"),z(n.$$.fragment),l=T(),p&&p.c(),s=T(),i=I("div"),b&&b.c(),o=T(),v&&v.c(),r=T(),z(f.$$.fragment),a=T(),z(u.$$.fragment),c=T(),z(h.$$.fragment),_(i,"class","viewport svelte-dr59qu"),_(e,"class","timeline timeline-content svelte-dr59qu"),F(e,"clickable",t[9])},m(A,D){E(A,e,D),j(n,e,null),w(e,l),p&&p.m(e,null),w(e,s),w(e,i),b&&b.m(i,null),t[15](i),w(e,o),v&&v.m(e,null),w(e,r),j(f,e,null),w(e,a),j(u,e,null),w(e,c),j(h,e,null),d=!0,g||(k=Z(e,"click",ae(t[11])),g=!0)},p(A,[D]){const W={};D&4&&(W.nSeries=A[2].series.length>1),D&2&&(W.categorised=A[1].categorise),D&2&&(W.grouped=A[1].totalise),D&2&&(W.filter=A[1].filter),D&6&&(W.title=A[1].title||A[2].name),n.$set(W),A[1].readonly===!1?p?(p.p(A,D),D&2&&m(p,1)):(p=en(A),p.c(),m(p,1),p.m(e,s)):p&&(B(),C(p,1,1,()=>{p=null}),q()),A[5]!==0?b?(b.p(A,D),D&32&&m(b,1)):(b=tn(A),b.c(),m(b,1),b.m(i,null)):b&&(B(),C(b,1,1,()=>{b=null}),q()),A[4]!=0&&A[5]!==0&&A[1].readonly===!1?v?(v.p(A,D),D&50&&m(v,1)):(v=sn(A),v.c(),m(v,1),v.m(e,r)):v&&(B(),C(v,1,1,()=>{v=null}),q());const M={};D&4&&(M.eventsSubCats=A[2].eventsSubCats),D&64&&(M.filteredEvents=A[6]),D&2&&(M.options=A[1]),f.$set(M);const P={};D&2&&(P.selectedEvent=A[1].selectedEvent),u.$set(P);const R={};D&2&&(R.options=A[1]),D&1&&(R.viewportWidth=A[0]),h.$set(R),D&512&&F(e,"clickable",A[9])},i(A){d||(m(n.$$.fragment,A),m(p),m(b),m(v),m(f.$$.fragment,A),m(u.$$.fragment,A),m(h.$$.fragment,A),d=!0)},o(A){C(n.$$.fragment,A),C(p),C(b),C(v),C(f.$$.fragment,A),C(u.$$.fragment,A),C(h.$$.fragment,A),d=!1},d(A){A&&y(e),H(n),p&&p.d(),b&&b.d(),t[15](null),v&&v.d(),H(f),H(u),H(h),g=!1,k()}}}function ps(t,e,n){let l,s,i;te(t,Ne,P=>n(16,s=P)),te(t,Qe,P=>n(14,i=P));let{data:o}=e,{settings:r}=e,{viewportWidth:f}=e;const a=N.processDataset(o),u={...N.initSettings(a.xUnit,r,a.start,a.end,[...a.eventsSubCats,...a.seriesSubCats]),selectedEvent:!1,selectedPoint:!1,zoom:1,series:[]};let c,h=0,d=0,g=[],k=[],p=[];bn(()=>{const P=window.navigator.msMaxTouchPoints,R="ontouchstart"in document.createElement("div");Me(Ne,s=P||R,s)});function b(P){const R=P.detail;switch(R.name){case"selectedPoint":n(1,u.selectedPoint=R.data,u);break;case"selectedEvent":n(1,u.selectedEvent=R.data,u);break;case"symbols":n(1,u.symbols=R.data,u);break;case"logScale":n(1,u.logScale=R.data,u);break;case"xRange":n(1,u.xRange=R.data,u),n(1,u.selectedEvent=!1,u),n(1,u.selectedPoint=!1,u),D();break;case"filter":n(1,u.filter=R.data,u),n(1,u.selectedEvent=!1,u),n(1,u.selectedPoint=!1,u);break;case"categorise":n(1,u.categorise=R.data,u),n(1,u.filter="",u);break;case"totalise":n(1,u.totalise=R.data,u),n(1,u.filter="",u);break;case"sort":n(1,u.sort=R.data,u);break;case"search":n(1,u.search=R.data,u),D();break}R.name!="search"&&R.name!="category"&&n(1,u.search="",u)}function v(){u.selectedPoint!==!1&&n(1,u.selectedPoint=!1,u)}function A(){c!==void 0&&(c.clientWidth!==0&&n(0,f=c.clientWidth+N.CANVAS_PADDING_LEFT+N.CANVAS_PADDING_RIGHT),c.clientWidth!=f&&(D(),s==!1&&u.selectedEvent&&setTimeout(W,500)))}function D(){n(4,h=f-N.CANVAS_PADDING_LEFT-N.CANVAS_PADDING_RIGHT),n(5,d=h/u.xRange.range);let P=u.xRange.start,R=u.xRange.end;n(6,g=N.processEvents(a.events,d,P,R,a.eventsSubCats,u.subCats,u.search)),a.series.length>0&&n(7,k=N.processSeries(a.series,d,P,R)),a.groups.length>0&&n(8,p=N.processSeries(a.groups,d,P,R)),n(2,a.xAxis=N.scaleXAxis(a.xUnit,a.xAxis,h,u.xRange),a)}function W(){if(u.selectedEvent){const P=c.querySelector(".selected");P&&P.scrollIntoView({block:"start"})}}function M(P){le[P?"unshift":"push"](()=>{c=P,n(3,c)})}return t.$$set=P=>{"data"in P&&n(12,o=P.data),"settings"in P&&n(13,r=P.settings),"viewportWidth"in P&&n(0,f=P.viewportWidth)},t.$$.update=()=>{t.$$.dirty&16384&&i&&A(),t.$$.dirty&2&&n(9,l=u.selectedEvent!==!1||u.selectedPoint!==!1)},[f,u,a,c,h,d,g,k,p,l,b,v,o,r,i,M]}class on extends K{constructor(e){super(),J(this,e,ps,bs,Y,{data:12,settings:13,viewportWidth:0})}}const{window:vs}=jn;function rn(t,e,n){const l=t.slice();return l[10]=e[n],l[12]=n,l}function fn(t){let e,n,l=t[0],s=[];for(let o=0;o<l.length;o+=1)s[o]=an(rn(t,l,o));const i=o=>C(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=x()},m(o,r){for(let f=0;f<s.length;f+=1)s[f].m(o,r);E(o,e,r),n=!0},p(o,r){if(r&13){l=o[0];let f;for(f=0;f<l.length;f+=1){const a=rn(o,l,f);s[f]?(s[f].p(a,r),m(s[f],1)):(s[f]=an(a),s[f].c(),m(s[f],1),s[f].m(e.parentNode,e))}for(B(),f=l.length;f<s.length;f+=1)i(f);q()}},i(o){if(!n){for(let r=0;r<l.length;r+=1)m(s[r]);n=!0}},o(o){s=s.filter(Boolean);for(let r=0;r<s.length;r+=1)C(s[r]);n=!1},d(o){oe(s,o),o&&y(e)}}}function an(t){let e,n,l;var s=on;function i(o){return{props:{data:o[2][o[12]],settings:o[3][o[12]],viewportWidth:o[10].clientWidth}}}return s&&(e=new s(i(t))),{c(){e&&z(e.$$.fragment),n=x()},m(o,r){e&&j(e,o,r),E(o,n,r),l=!0},p(o,r){const f={};if(r&4&&(f.data=o[2][o[12]]),r&8&&(f.settings=o[3][o[12]]),r&1&&(f.viewportWidth=o[10].clientWidth),s!==(s=on)){if(e){B();const a=e;C(a.$$.fragment,1,0,()=>{H(a,1)}),q()}s?(e=new s(i(o)),z(e.$$.fragment),m(e.$$.fragment,1),j(e,n.parentNode,n)):e=null}else s&&e.$set(f)},i(o){l||(e&&m(e.$$.fragment,o),l=!0)},o(o){e&&C(e.$$.fragment,o),l=!1},d(o){o&&y(n),e&&H(e,o)}}}function ws(t){let e,n,l,s,i=t[1]&&fn(t);return{c(){e=I("div"),i&&i.c(),_(e,"id","placeholder"),_(e,"class","svelte-17qwnxi")},m(o,r){E(o,e,r),i&&i.m(e,null),n=!0,l||(s=Z(vs,"resize",t[4]),l=!0)},p(o,[r]){o[1]?i?(i.p(o,r),r&2&&m(i,1)):(i=fn(o),i.c(),m(i,1),i.m(e,null)):i&&(B(),C(i,1,1,()=>{i=null}),q())},i(o){n||(m(i),n=!0)},o(o){C(i),n=!1},d(o){o&&y(e),i&&i.d(),l=!1,s()}}}const ks=5;function ys(t,e,n){let l,s,i;te(t,Mt,d=>n(6,l=d)),te(t,me,d=>n(7,s=d)),te(t,Qe,d=>n(8,i=d));let o=0,r=[],f=!1,a=[],u=[];const c=N.debounce(()=>{Me(Qe,i=window.innerWidth,i),Me(Mt,l=i>=N.NAV_BREAK,l),Me(me,s=!l,s)},500);function h(d){const g=document.querySelectorAll("#placeholder .timeline");if(g.length===d.length){g.forEach((k,p)=>{d[p].appendChild(k)}),o=0;return}o<ks&&(o++,setTimeout(()=>{h(d)},500))}return bn(()=>{n(0,r=document.querySelectorAll("time-line")),r.forEach(d=>{const g=d.getAttribute("data-slug"),k=d.getAttribute("data-settings")!==null?d.getAttribute("data-settings"):"";fetch(g).then(p=>p.json()).then(p=>{n(2,a=[...a,p]),n(3,u=[...u,k]),n(1,f=r.length===a.length),f&&setTimeout(()=>{o=0,h(r)},500)})}),c()}),[r,f,a,u,c]}class Cs extends K{constructor(e){super(),J(this,e,ys,ws,Y,{})}}const Es=document.querySelectorAll("time-line");if(Es.length>0){const t=document.createElement("DIV");t.id="app",document.body.appendChild(t),new Cs({target:document.getElementById("app")})}
